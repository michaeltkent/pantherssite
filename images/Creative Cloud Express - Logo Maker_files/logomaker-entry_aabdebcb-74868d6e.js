(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{105:function(e,t,n){"use strict";n(713),n(715);var s=n(14),o=(n(354),n(357),n(11)),i=n(21),a=(n(72),n(206)),r=n(5);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u="/express-apps/logomaker/".slice(0,-1),h=e=>{e.preventDefault();const t=e.target,n=new FormData(t),s=window.spldRouter.urlForPath(t.dataset.path),i={};let l=1;for(const e of n.entries()){const t=e[0],n=Object(o.h)(e[1]),s=c({},Object(o.d)(),{[t]:n});i["contextualData".concat(l)]="".concat(t,":").concat(n),l+=1,Object(o.k)(s)}const{eventName:d,pageName:u}=g(s);r.c.getInstance().publish(d,i,u),Object(a.a)("vaadin-router-go",window,{pathname:s})},p=e=>{const t=e.target.parentElement,n=window.spldRouter.urlForPath(t.dataset.path),s=document.getElementsByTagName("form")[0],o=new FormData(s),i={};let l=1;for(const e of o.entries()){const t=e[0],n=e[1];i["contextualData".concat(l)]="".concat(t,":").concat(n),l+=1}const{eventName:c,pageName:d}=m(n);r.c.getInstance().publish(c,i,d),Object(a.a)("vaadin-router-go",window,{pathname:n})},g=e=>{switch(e){case"".concat(u).concat(i.a.root):return{eventName:r.b.analyticsAppLaunched,pageName:r.d};case"".concat(u).concat(i.a.visualStyle):return{eventName:r.b.analyticsBusinessInfoAdded,pageName:r.d};case"".concat(u).concat(i.a.chooseSymbol):return{eventName:r.b.analyticsNextOnStyle,pageName:r.k};case"".concat(u).concat(i.a.results):return{eventName:r.b.analyticsNextOnSymbol,pageName:r.i};default:return{eventName:r.b.analyticsUnknown,pageName:r.j}}},m=e=>{switch(e){case"".concat(u).concat(i.a.root):case"".concat(u,"/"):return{eventName:r.b.analyticsBackOnStyle,pageName:r.k};case"".concat(u).concat(i.a.visualStyle):return{eventName:r.b.analyticsBackOnSymbol,pageName:r.i};case"".concat(u).concat(i.a.chooseSymbol):return{eventName:r.b.analyticsBackOnResults,pageName:r.h};case"".concat(u).concat(i.a.results):return{eventName:r.b.analyticsBackOnPreview,pageName:r.g};default:return{eventName:r.b.analyticsUnknown,pageName:r.j}}};function b(){const e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <section class="intro-view intro-madlibs-view">\n                <h1 class="intro-view__title">Tell us about your logo</h1>\n\n                <form @submit="','" data-path="','">\n                    <div class="intro-madlibs-view__form-section">\n                        <label>\n                            My\n                            <spld-madlib-input\n                                auto-focus="','"\n                                class="industry-inp"\n                                inp-name="industry"\n                                aria-label="Industry"\n                                placeholder="Restaurant "\n                                inp-value="','"\n                                @input="','"\n                            ></spld-madlib-input>\n                            business\n                        </label>\n\n                        <label>\n                            is called\n                            <spld-madlib-input\n                                class="business-name-inp"\n                                aria-label="Business name"\n                                inp-name="businessName"\n                                placeholder="Yummy noodles"\n                                inp-value="','"\n                               @input="','"\n                            ></spld-madlib-input>\n                            and my\n                        </label>\n                        <label>\n                            slogan is\n                            <spld-madlib-input\n                                class="tagline-inp"\n                                aria-label="Tagline"\n                                inp-name="tagLine"\n                                placeholder="Best in town!(Optional)"\n                                inp-value="','"\n                            ></spld-madlib-input>\n                        </label>\n                    </div>\n\n                    <div class="intro-view__bottom-controls">\n                        <spld-button\n                            primary\n                            forward\n                            label="Next"\n                            disabled="','"\n                        ></spld-button>\n                    </div>\n                </form>\n                <div class="bottom-link-legal">\n                    <span class="bottom-link-legal-copyright">\n                            Copyright Â© 2019 Adobe.\n                            <span class="bottom-links-legal-rights"> All rights reserved.</span>\n                    </span>\n                    <a href="http://www.adobe.com/privacy.html" data-auto="footer-link-privacy" target="_blank">Privacy</a>\n                    &nbsp;&nbsp;/&nbsp;&nbsp;\n                    <a href="http://www.adobe.com/legal/terms.html" data-auto="footer-link-terms" target="_blank">Terms of Use</a>\n                        &nbsp;&nbsp;/&nbsp;&nbsp;\n                    <a id="openCookieModal" data-auto="footer-link-cookies" onclick="adobePrivacy.showConsentPopup();">Cookie Preferences</a>\n                    \n                    / &nbsp;\n                    <a href="https://www.adobe.com/privacy/opt-out.html#interest-based-ads" target="_blank">AdChoices</a>\n                </div>\n            </section>\n\n\n        ']);return b=function(){return e},e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends s.a{constructor(){super(),w(this,"state",{nextDisabled:!0}),w(this,"businessNameElement",void 0),w(this,"selectedIndustry",""),w(this,"selectedBusinessName",void 0),w(this,"selectedTagline",void 0),w(this,"domainInputElement",void 0),w(this,"businessNameInput",void 0),w(this,"autoFocus",void 0);const{industry:e,businessName:t,tagLine:n}=Object(o.d)();this.selectedIndustry=e||"",this.selectedBusinessName=t||"",this.selectedTagline=n||"",this.domainInputElement=null,this.businessNameInput=null,this.autoFocus="Desktop"===Object(o.b)()}didConnect(){this.setState({nextDisabled:!(this.selectedIndustry&&this.selectedBusinessName)})}didRender(){this.getInputElements();const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(o.d)(),{preserveUserProvidedSearch:!1});Object(o.k)(e)}getInputElements(){this.domainInputElement=document.getElementsByName("industry")[0],this.businessNameElement=document.getElementsByName("businessName")[0]}onInput(e){this.domainInputElement&&this.businessNameElement||this.getInputElements();const t=this.domainInputElement.value,n=this.businessNameElement.value,{nextDisabled:s}=this.state;s&&t&&n?this.setState({nextDisabled:!1}):s||t&&n||this.setState({nextDisabled:!0})}render(e){let{domRender:t,selectedIndustry:n,selectedBusinessName:s,selectedTagline:o,autoFocus:a}=e;const{nextDisabled:r}=this.state;return t(b(),h,i.a.visualStyle,a,n,this,s,this,o,r)}}f.define("intro-madlibs-view");var y=f,S=(n(717),n(53)),P=(n(355),n(259));const _="style-picker-list",j="".concat(_,"__item"),O="img/visual-style-references",I=[{group:"visualStyle",name:"Bold",imgPaths:"".concat(O,"/bold/bold1.png,").concat(O,"/bold/bold2.png,").concat(O,"/bold/bold3.png,").concat(O,"/bold/bold4.png")},{group:"visualStyle",name:"Elegant",imgPaths:"".concat(O,"/elegant/elegant1.png,").concat(O,"/elegant/elegant2.png,").concat(O,"/elegant/elegant3.png,").concat(O,"/elegant/elegant4.png")},{group:"visualStyle",name:"Modern",imgPaths:"".concat(O,"/modern/modern1.png,").concat(O,"/modern/modern2.png,").concat(O,"/modern/modern3.png,").concat(O,"/modern/modern4.png")},{group:"visualStyle",name:"Decorative",imgPaths:"".concat(O,"/decorative/decorative1.png,").concat(O,"/decorative/decorative2.png,").concat(O,"/decorative/decorative3.png,").concat(O,"/decorative/decorative4.png")}];function k(){const e=L(['\n            <spld-visual-style-card\n                ?is-selected="','"\n                class="','"\n                inp-name="','"\n                imgs-path="','"\n                label="','"\n                @change="','"\n            ></spld-visual-style-card>\n        ']);return k=function(){return e},e}function D(){const e=L(['\n            <section class="intro-view intro-visual-style">\n                <h1 class="intro-view__title">Choose a style</h1>\n                <p class="intro-view__desc">How would you describe your aesthetic?</p>\n                <form @submit="','" data-path="','">\n                    <section class="','">','</section>\n                    <div class="intro-view__bottom-controls">\n                        <spld-button\n                            id="vs-back"\n                            data-path="','"\n                            @click="','"\n                            secondary \n                            back \n                            mode="button"\n                            label="Back"\n                        ></spld-button>\n                        <spld-button\n                            id="vs-next"\n                            primary\n                            forward\n                            label="Next"\n                            disabled="','"\n                        ></spld-button>\n                    </div>\n                </form>\n            </section>\n        ']);return D=function(){return e},e}function L(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class U extends s.a{constructor(){super(),E(this,"state",{nextDisabled:!0}),E(this,"selectedVisualStyle",""),E(this,"pageStartTime",void 0),this.pageStartTime=Date.now(),this.itemRenderer=this.itemRenderer.bind(this),Object(o.a)(i.a.visualStyle)?(this.selectedVisualStyle=Object(o.d)().visualStyle,this.selectedVisualStyle&&(this.setState({nextDisabled:!1}),this.logStyleChangedEvent(this.selectedVisualStyle))):Object(S.a)("vaadin-router-go",window,{pathname:window.spldRouter.urlForPath("/")})}didConnect(){Object(o.e)().then(()=>{P.a.info("fonts loaded after ",Date.now()-this.pageStartTime)})}render(e){let{domRender:t}=e;const n=I.map(this.itemRenderer),{nextDisabled:s}=this.state;return t(D(),h,i.a.chooseSymbol,_,n,i.a.root,p,s)}itemRenderer(e,t){let{group:n,name:o,imgPaths:i}=e;const a=o===this.selectedVisualStyle;return Object(s.b)(k(),a||null,j,n,i,o,this)}onChange(e){e.preventDefault();const t=e.target,n=t.checked;this.logStyleChangedEvent(t.value),n&&this.setState({nextDisabled:!1})}logStyleChangedEvent(e){const t={contextualData1:"visualStyle:".concat(e)};r.c.getInstance().publish(r.b.analyticsStyleChanged,t,r.k)}}U.define("intro-visual-style-view");var C=U,x=(n(719),n(82),n(257),n(346),n(170),n(205),n(356),n(260)),F=n(19),N=n.n(F),T=n(550),R=n.n(T);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach(function(t){K(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V(){const e=J(['\n            <spld-select-icon-card\n                inp-id="','"\n                ?is-selected="','"\n                inp-name="selectedSymbol"\n                class="icon-preview-list__item"\n                img-src="','"\n                svg-src="','"\n                alt="icon preview"\n                @change="','"\n                @click="','"\n            ></spld-select-icon-card>\n        ']);return V=function(){return e},e}function M(){const e=J(['\n            <section class="intro-view intro-choose-symbol">\n                <h1 class="intro-view__title">Choose an icon</h1>\n                <p class="intro-view__desc">Icons help add personality! Try searching for a keyword.</p>\n\n                <form @submit="','" data-path="','">\n                    <spld-input\n                        auto-focus="','"\n                        inp-name="searchSymbol"\n                        type="text"\n                        @input="','"\n                        inp-value="','"\n                        label="Search free icons" placeholder="E.g. Restaurant, Real Estate, Shopâ¦"\n                    ></spld-input>\n                \n                    ',"\n\n                    ","\n\n                    ",'\n\n                    <div class="intro-view__bottom-controls-symbols">\n                        <spld-button\n                            secondary\n                            back\n                            mode="button"\n                            data-path="','"\n                            @click="','"\n                            label="Back"\n                        ></spld-button>\n                        ',"\n                    </div>\n                </form>\n            </section>\n        "]);return M=function(){return e},e}function z(){const e=J(['\n                  <spld-button primary forward label="Next"></spld-button>\n              ']);return z=function(){return e},e}function G(){const e=J(['\n                  <spld-button secondary forward label="Skip >" @click="','"></spld-button>\n              ']);return G=function(){return e},e}function H(){const e=J(['\n                      <article class="icon-preview-list" @scroll="','">',"</article>\n                  "]);return H=function(){return e},e}function Q(){const e=J(['\n                  <p class="search-icons-message">\n                      Hmm, no results! <br />\n                      Try searching for a specific word relating to your idea\n                  </p>\n              ']);return Q=function(){return e},e}function W(){const e=J(["\n                  <spld-loader />\n              "]);return W=function(){return e},e}function J(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q=40,Y="vector",Z=["bank","tree","cat","dog","business","nature","design","food","craft","mountain","love","yoga","computer"];class $ extends s.a{constructor(){if(super(),K(this,"state",{iconImages:[],showLoader:!0,showSearchMessage:!1,showSkip:!1,selectDefault:!0}),K(this,"timeout",void 0),K(this,"searchService",void 0),K(this,"currentSelected",void 0),K(this,"selectedSymbol",void 0),K(this,"selectedIndustry",void 0),K(this,"autoFocus",void 0),K(this,"searchQuery",""),K(this,"spldInputEle",void 0),K(this,"searchAlternate",!0),K(this,"alternateWord",void 0),K(this,"userProvidedSearchSymbol",""),K(this,"preserveUserProvidedSearch",!1),this.onInitialLoad=this.onInitialLoad.bind(this),this.onPagingLoad=this.onPagingLoad.bind(this),this.onScroll=this.onScroll.bind(this),this.onChange=this.onChange.bind(this),this.onIconSelect=this.onIconSelect.bind(this),this.iconsListRenderer=this.iconsListRenderer.bind(this),this.handleSkip=this.handleSkip.bind(this),this.handleIconFormSubmit=this.handleIconFormSubmit.bind(this),this.onEnter=this.onEnter.bind(this),this.timeout=null,this.searchService=new x.a,this.autoFocus="Desktop"===Object(o.b)(),this.alternateWord=N.a.shuffle(Z)[0],Object(o.a)(i.a.chooseSymbol)){const e=Object(o.d)();this.selectedIndustry=e.industry,this.selectedSymbol=e.selectedSymbol,this.preserveUserProvidedSearch=e.preserveUserProvidedSearch,this.userProvidedSearchSymbol=e.preserveUserProvidedSearch?e.searchSymbol:"",this.searchQuery=this.userProvidedSearchSymbol?this.userProvidedSearchSymbol:this.extractSearchQuery(this.selectedIndustry),this.currentSelected=null,this.spldInputEle=null,this.getIconsPreview(this.searchQuery)}else Object(S.a)("vaadin-router-go",window,{pathname:window.spldRouter.urlForPath("/")})}extractSearchQuery(e){const t=R.a.removeStopwords(e.split(" "));return t.length>0?t[0]:Z[0]}onConnect(){this.on("keypress",document,this.onEnter)}didRender(){this.spldInputEle=this.find("spld-input")}onEnter(e){if(13===e.keyCode&&(e.preventDefault(),this.spldInputEle&&this.spldInputEle.inpValue)){const e=this.spldInputEle.inpValue;this.getIconsPreview(e)}}async getIconsPreview(e){await this.searchService.search({query:e,size:q,asset_type:Y,success:this.onInitialLoad})}onInitialLoad(e){const t=this.itemsFromResponse(e);let n=!1,s=!1;if(t.length<=0&&this.searchAlternate)return this.searchAlternate=!1,this.searchQuery=this.alternateWord,void this.getIconsPreview(this.alternateWord);t.length<=0&&(n=!0,s=!0),this.setState({showSearchMessage:s,showSkip:n,iconImages:t,showLoader:!1,selectDefault:!0}),this.logSymbolAnalytics(r.b.analyticsSearchSymbol,this.searchQuery,null)}onPagingLoad(e){const t=this.itemsFromResponse(e),n=this.state.iconImages.concat(t);this.setState({iconImages:n})}itemsFromResponse(e){return e.map(e=>e.data)}onInput(e){const t=e.target.value||"";clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{this.searchQuery=t,this.searchAlternate=!1,t?this.getIconsPreview(t):this.setState({showSearchMessage:!0,iconImages:[],showSkip:!0})},500)}onScroll(e){const t=e.target;t.offsetHeight+t.scrollTop===t.scrollHeight&&this.searchService.searchNextPage({success:this.onPagingLoad})}render(e){let{domRender:t,autoFocus:n}=e;const{showLoader:o,showSearchMessage:a,iconImages:r,showSkip:l}=this.state,c=r.map(this.iconsListRenderer),d=o?Object(s.b)(W()):null,u=a?Object(s.b)(Q()):null,h=c&&c.length>0?Object(s.b)(H(),this,c):null,g=l?Object(s.b)(G(),this.handleSkip):Object(s.b)(z());return t(M(),this.handleIconFormSubmit,i.a.results,this.autoFocus,this,this.userProvidedSearchSymbol,d,u,h,i.a.visualStyle,p,g)}iconsListRenderer(e,t){let n=!!this.selectedSymbol&&this.selectedSymbol.includes(e.id);n=n||this.state.selectDefault&&0===t;const o=e._links.rendition[3].href,i=e._links.rendition[5].href;return n&&(this.currentSelected=e.id),Object(s.b)(V(),e.id,n||null,o,i,this,this.onIconSelect)}handleSkip(){const e=localStorage.getItem("store")||"{}",t=JSON.parse(e);delete t.selectedSymbol,delete t.selectedSymbolMetadata;const n=this.spldInputEle.inpValue||this.searchQuery,s=B({},t,{searchSymbol:n});Object(o.k)(s);const i=window.spldRouter.urlForPath("/results");Object(S.a)("vaadin-router-go",window,{pathname:i}),this.logSymbolAnalytics(r.b.analyticsSkipSymbol,n,null)}onChange(e){this.currentSelected=e.target.id,this.selectedSymbol=this.currentSelected;const{showSkip:t}=this.state;t&&this.setState({showSkip:!1,selectDefault:!1})}onIconSelect(e){const t=e.target;if("radio"===t.type){const e=t.id;this.currentSelected&&e===this.currentSelected&&(t.checked=!1,this.clearSelectionsByUser(),this.setState({showSkip:!0,selectDefault:!1}))}}clearSelectionsByUser(){this.selectedSymbol=null,this.currentSelected=null}handleIconFormSubmit(e){e.preventDefault();const t=e.target,n=new FormData(t),s=window.spldRouter.urlForPath(t.dataset.path),i=n.get("selectedSymbol"),a=n.get("searchSymbol")||this.searchQuery,l=this.state.iconImages.filter(e=>e.id===this.currentSelected)[0],c=B({},Object(o.d)(),{selectedSymbol:i,searchSymbol:a,selectedSymbolMetadata:l,preserveUserProvidedSearch:!0});Object(o.k)(c),this.logSymbolAnalytics(r.b.analyticsNextOnSymbol,a,i),Object(S.a)("vaadin-router-go",window,{pathname:s})}logSymbolAnalytics(e,t,n){const s={contextualData1:"searchSymbol:".concat(t)};n&&(s.contextualData2="selectedSymbol:".concat(n)),r.c.getInstance().publish(e,s,r.i)}}$.define("intro-choose-symbol-view");var X=$,ee=(n(755),n(351),n(860),n(99)),te=n(98),ne=n(4),se=n(552),oe=n.n(se),ie=n(15),ae=n.n(ie);var re=n(126);function le(){const e=ge(['\n            <article class="modal" id="saving-modal">\n                <div style="opacity: 1" class="modal__wrapper" id="saving-loader">\n                    <spld-loader message="','"></spld-loader>\n                </div>\n            </article>\n        ']);return le=function(){return e},e}function ce(){const e=ge(['\n            <section class="','">\n                <h1 class="intro-view__title">Check out your options!</h1>\n                <p class="intro-view__desc" subtitle>Choose a logo to explore more design options and to download it.</p>\n\n                ','\n\n                <article class="logo-preview-results" logo-results>\n                    ',"\n                </article>\n                \n                ",'\n\n                <div class="results_bottom_controls" bottom-controls>\n                    <div class="logo-style-filter-view" style-filter>\n                        <article>Didn\'t see what you want? Try a different style</article>\n                        <div class="filter-buttons">','</div>\n                    </div>\n                    <div class="intro-view__bottom-controls-results">\n                        <spld-button\n                            data-path="','"\n                            @click="','"\n                            secondary\n                            back\n                            label="Back to choose symbol"\n                        ></spld-button>\n                    </div>\n                </div>\n                ',"\n            </section>\n        "]);return ce=function(){return e},e}function de(){const e=ge(['\n            <spld-loader class="showNextLoader" />\n        ']);return de=function(){return e},e}function ue(){const e=ge(['\n                  <spld-loader message="Designing logos for you..."></spld-loader>\n              ']);return ue=function(){return e},e}function he(){const e=ge(['\n                <spld-button\n                    @click="','"\n                    link\n                    forward\n                    id="','"\n                    label="','>"\n                ></spld-button>\n            ']);return he=function(){return e},e}function pe(){const e=ge(['\n            <spld-logo-preview\n                doc-id="','"\n                .previewImg="','"\n                .coreGenerator=',"\n                .appliedStyle=",'\n                .metadata="','"\n                is-signed-in="','"\n                @PREVIEW_ITEM_CLICKED="','"\n            ></spld-logo-preview>\n        ']);return pe=function(){return e},e}function ge(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(n,!0).forEach(function(t){ve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class we extends s.a{constructor(){super(),ve(this,"state",{previewImages:[],showLoader:!0,showNextLoader:!1,showSavingProjectLoader:!1}),ve(this,"currentPage",void 0),ve(this,"fetchingNextBatch",void 0),ve(this,"startTime",void 0),ve(this,"coreGenerator",void 0),ve(this,"parsedStore",void 0),ve(this,"nextLoader",void 0),ve(this,"nextPagePromises",void 0),ve(this,"bottomControlsEle",void 0),ve(this,"logoResultsEle",void 0),ve(this,"subtitleEle",void 0),ve(this,"currentScroll",void 0),ve(this,"svgAsText",void 0),ve(this,"isSignedIn",!1),ve(this,"pageStartTime",void 0),ve(this,"authController",void 0),ve(this,"featureService",void 0),this.pageStartTime=Date.now(),this.logosPreviewListRenderer=this.logosPreviewListRenderer.bind(this),this.handleVisualStyleFilter=this.handleVisualStyleFilter.bind(this),this.onResultsPageScrolled=this.onResultsPageScrolled.bind(this);const e=localStorage.getItem("store")||"{}";this.parsedStore=JSON.parse(e),this.coreGenerator=null,this.currentPage=0,this.nextPagePromises=null,this.fetchingNextBatch=!1,this.bottomControlsEle=null,this.logoResultsEle=null,this.subtitleEle=null,this.currentScroll=0,this.authController=re.a.getInstance(),this.featureService=te.b.getInstance(),Object(o.a)(i.a.results)?this.getLogosGenerated():Object(S.a)("vaadin-router-go",window,{pathname:window.spldRouter.urlForPath("/")})}onConnect(){this.on("scroll",document,this.onResultsPageScrolled)}onDisconnect(){this.off("scroll",document,this.onResultsPageScrolled)}didRender(){window.scrollTo(0,this.currentScroll),this.nextLoader=this.find("spld-loader"),this.bottomControlsEle=this.find("[bottom-controls]"),this.logoResultsEle=this.find("[logo-results]"),this.subtitleEle=this.find("[subtitle]"),ne.c.info("Time to didRender: ",Date.now()-this.pageStartTime)}async getLogosGenerated(){this.isSignedIn=await this.authController.isUserSignedIn(),this.isSignedIn&&await this.featureService.allFeatureLoaded(),Object(o.e)().then(()=>{ne.c.info("fonts loaded after ",Date.now()-this.pageStartTime),this.makeLogos(this.parsedStore)})}async makeLogos(e){let t=ae.a.resolve(this.svgAsText);const n=[],s=this.parsedStore.selectedSymbol;!this.svgAsText&&s&&(t=oe.a.get("".concat(s,"?api_key=MarvelCP1"),{responseType:"text"})),t.then(t=>{this.svgAsText=t,t&&n.push({svgUrl:s,iconSvg:this.svgAsText.data,info:{}}),this.coreGenerator=new ee.a(be({},e,{icons:n})),this.setLogoPreivewImages(this.currentPage)})}async setLogoPreivewImages(e){this.startTime=Date.now();const t=this.coreGenerator.generateLogos(e),n=await t,s=Object.values(n),o=(await Promise.all(s)).map(this.logosPreviewListRenderer),i=this.state.previewImages.concat(o),a=Date.now()-this.startTime;this.nextLoader&&this.addClass("showNextLoader",this.nextLoader),this.setState({previewImages:i,showLoader:!1,showNextLoader:!1}),setTimeout(()=>this.fetchingNextBatch=!1,50),this.logResultsAnalytics(a)}async handleVisualStyleFilter(e){const t=e.target.id,n=this.parsedStore.visualStyle;this.parsedStore.visualStyle=t;const s=be({},this.parsedStore);this.currentPage=0,this.currentScroll=0,Object(o.k)(s),this.getLogosGenerated(),this.setState({previewImages:[],showLoader:!0});const i={contextualData1:"currentVisualStyle:".concat(n),contextualData2:"newVisualStyle:".concat(t)};r.c.getInstance().publish(r.b.analyticsStyleFilterChanged,i,r.h)}viewMore(){this.currentPage<this.coreGenerator.maxPages()-1&&(this.fetchingNextBatch=!0,this.removeClass("showNextLoader",this.nextLoader),this.currentPage+=1,this.currentScroll=window.scrollY,this.setLogoPreivewImages(this.currentPage))}logosPreviewListRenderer(e){let{docId:t,previewImg:n,appliedStyle:o,metadata:i}=e;return Object(s.b)(pe(),t,n,this.coreGenerator,o,i,this.isSignedIn,this.onLogoClick.bind(this))}onLogoClick(){this.setState({showSavingProjectLoader:!0}),Object(o.i)(ee.a).then(e=>{this.setState({showSavingProjectLoader:!1});const t="post/".concat(e),n="".concat(ne.a.getSetting(ne.d.SPARK_SERVER_ENDPOINT),"/sp/design/").concat(t,"?workflow=logomaker&autoDownload=false");window.open(n,"_blank")||(window.location.href=n)})}renderFilterOptions(){const e=this.parsedStore.visualStyle;return I.filter(t=>t.name!==e).map(e=>Object(s.b)(he(),this.handleVisualStyleFilter,e.name,e.name))}onResultsPageScrolled(e){if(window.location.pathname.includes(i.a.results)){const e=this.bottomControlsEle.style,t=window.scrollY+window.innerHeight,n=this.logoResultsEle.offsetHeight;this.coreGenerator&&this.currentPage>=this.coreGenerator.maxPages()-1&&t-this.bottomControlsEle.offsetHeight>=n+this.logoResultsEle.offsetTop?e.display="contents":e.display="none",!this.fetchingNextBatch&&n>0&&t-this.bottomControlsEle.offsetHeight>=n+this.logoResultsEle.offsetTop-200&&this.viewMore()}}render(e){let{domRender:t}=e;const{showLoader:n,previewImages:o,showSavingProjectLoader:a}=this.state,r="intro-view intro-results ".concat(n?"intro-view_is-loader-visible":""),l=this.renderFilterOptions(),c=n?Object(s.b)(ue()):null,d=Object(s.b)(de());return t(ce(),r,c,o,d,l,i.a.chooseSymbol,p,a?this.getSavingProjectLoader():null)}getSavingProjectLoader(){return Object(s.b)(le(),"Hang tight, we're saving your logo to Creative Cloud Express")}logResultsAnalytics(e){const t=Object(o.l)(this.parsedStore),n={contextualData1:"timeForResultGeneration:".concat(e),contextualData2:t.industry,contextualData3:t.businessName,contextualData4:t.tagLine,contextualData5:t.selectedSymbol,contextualData6:t.visualStyle,contextualData7:"pageNumber:".concat(this.currentPage)};r.c.getInstance().publish(r.b.analyticsResultsDisplayed,n,r.h)}}we.define("intro-results-view");var fe=we,ye=(n(826),n(100),n(200),n(263)),Se=n(10),Pe=n(2),_e=n.n(Pe),je=n(553),Oe=n(554),Ie=n.n(Oe),ke=n(39);const De="intro-preview__controls",Le="intro-preview__icon_attribution",Ee="intro-preview__shuffle-color-icon",Ue="intro-preview__shuffle-font-icon",Ce="intro-preview__undo-icon",xe="color",Fe="font";function Ne(){const e=He(['\n                              <img src="img/upgrade/icon-free.svg" id="spark-free-img" />\n                              <h1 class="modal__upgraded_plan_free-title">Welcome to Creative Cloud Express!</h1>\n                              <p class="modal__upgraded_plan_free-message">\n                                  Youâre a part of the CC Express starter plan, and your account is\n                                  <strong>FREE!</strong>\n                              </p>\n                          ']);return Ne=function(){return e},e}function Te(){const e=He(['\n            <article class="modal" id="upgrade-modal">\n                <div style="opacity: 0" class="modal__wrapper" id="saving-loader">\n                    ',"\n                    ","\n                </div>\n            </article>\n        "]);return Te=function(){return e},e}function Re(){const e=He(['\n            <article class="loader_continue_spark">Your logo is saved, continue on to customize it further.</article>\n            <div class="intro-view__bottom-controls-preview">\n                <spld-button @click="','" primary label="Continue" id="continuetospark">\n                </spld-button>\n            </div>\n        ']);return Re=function(){return e},e}function Ae(){const e=He(['\n            <spld-loader message="','"></spld-loader>\n        ']);return Ae=function(){return e},e}function Be(){const e=He(['\n            <article class="modal" id="upgrade-modal">\n                <div class="modal__wrapper">\n                    <h1 class="modal__wrapper__title">Nice logo! Do more with Adobe Spark.</h1>\n                    <p class="modal__wrapper__desc">\n                        Save and customize your logo, and easily create branded social stories, flyers, and eye-catching\n                        videos with your logo, <br />\n                        fonts and colors in one tap for only <strong>$9.99/month</strong>.\n                    </p>\n                    <div class="modal__upgrade_value">\n                        <div class="modal__value_prop">\n                            <ul class="modal__value_prop__items">\n                                <li>\n                                    <h2>Take your logo further</h2>\n                                    <p>\n                                        Customize your logo with over 16K gorgeous typefaces from Adobe Fonts, change\n                                        the icon with access to 1M icons, change the layout of logo and strengthen\n                                        consistency with smart color palettes based on your brand.\n                                    </p>\n                                </li>\n                                <li>\n                                    <h2>Design at the speed of social with professional templates</h2>\n                                    <p>\n                                        Get access to over 30K templates; complete with illustrations by influencers,\n                                        social media best practices at their core, and premium design assets from Adobe.\n                                    </p>\n                                </li>\n                                <li>\n                                    <h2>Add your brand</h2>\n                                    <p>\n                                        Easily upload your logo, fonts, colors and in one simple tap. Engage your\n                                        community on social media with easily recognizable branded content.\n                                    </p>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class="modal__value_assets">\n                            <video\n                                src="img/upgrade/feature2.mp4"\n                                poster="img/upgrade/feature2.png"\n                                loop=""\n                                muted=""\n                                autoplay=""\n                                id="spark-value"\n                                class="modal__value_assets__video"\n                            ></video>\n                        </div>\n                    </div>\n                    <p class="modal__value_prop__price">9.99</p>\n                    <div class="intro-view__bottom-controls-preview">\n                        <spld-button\n                            @click="','"\n                            secondary\n                            back\n                            label="No thanks!"\n                        ></spld-button>\n                        <spld-button @click="','" cta label="Buy Now" id="Buy"> </spld-button>\n                    </div>\n                </div>\n            </article>\n        ']);return Be=function(){return e},e}function Ve(){const e=He(['\n                                          <spld-button\n                                              @click="','"\n                                              cta\n                                              label="','"\n                                              id="customize"\n                                          >\n                                          </spld-button>\n                                      ']);return Ve=function(){return e},e}function Me(){const e=He(['\n                                      <article class="attributionToolTip" attribution-toolTip>\n                                          <div\n                                              class="pointer on-right"\n                                              style="top: 4px; right: -5px; left: auto;"\n                                          ></div>\n                                          <h2>\n                                              ',"\n                                          </h2>\n                                          <p>By: ","</p>\n                                          <p>Source: ","</p>\n                                          <p>License: ",'</p>\n                                          <p class="style:text-decoration: none">\n                                              <a\n                                                  class="original_source"\n                                                  href="','"\n                                                  target="_blank"\n                                                  >View original source page</a\n                                              >\n                                          </p>\n                                          <p class="attributionToolTip__copyright_info">\n                                              Images may be subject to copyright.<br /><a\n                                                  href="https://adobe.com/legal/permissions/image-notice.html"\n                                                  target="_blank"\n                                                  >Learn more</a\n                                              >\n                                          </p>\n                                      </article>\n                                  ']);return Me=function(){return e},e}function ze(){const e=He(['\n                                      <article\n                                          class="intro-preview__controls__container"\n                                          data-variation="icon-attr"\n                                          @click="','"\n                                          icon-attribution\n                                      >\n                                          <button class="','">\n                                              <spld-icon\n                                                  aria-label="icon attribution"\n                                                  icon-name="attribution"\n                                              ></spld-icon>\n                                          </button>\n                                          <span>Info</span>\n                                      </article>\n                                  ']);return ze=function(){return e},e}function Ge(){const e=He(['\n            <section class="','">\n                <h1 class="intro-view__title">Nice choice!</h1>\n                <p class="intro-view__desc">Continue customizing or download your logo now.</p>\n\n                <article class="intro-preview__selection-details">\n                        <img class="intro-preview__img" src="','" alt="final preview of the selected logo">\n                        <div class="','">\n\n                            <article class="intro-preview__controls__container" data-variation="color" @click="','">\n                                <button\n                                    title="Color"\n                                    alt="Color"\n                                    class="','"\n                                    >\n                                    <spld-icon aria-label="color variation" icon-name="shuffle-color"></spld-icon>\n                                </button>\n                                <span>Color</span>\n                            </article>\n                            \n                            <article class="intro-preview__controls__container" data-variation="font" @click="','">\n                                <button\n                                    class="','"\n                                    >\n                                    <spld-icon aria-label="font variation" icon-name="shuffle-font"></spld-icon>\n                                </button>\n                                <span>Font</span>\n                            </article>\n                           \n                            <article class="intro-preview__controls__container" data-variation="undo" @click="','">\n                                 <button\n                                    class="','"\n                                    >\n                                    <spld-icon aria-label="undo" icon-name="reset"></spld-icon>\n                                </button>\n                                <span>Undo</span>\n                            </article>\n                            \n                        ',"\n                         </div>\n                        ",'\n                        <div class="intro-view__bottom-controls-preview">\n                            <spld-button\n                                data-path="/results"\n                                @click="','"\n                                secondary\n                                back\n                                label="Back"\n                            ></spld-button>\n                            <spld-button\n                                @click="','"\n                                primary\n                                label="','"\n                                id="download">\n                            </spld-button>\n                            ','\n\n                        </div>\n                </article>\n                <article class="preview-wrapper" id="preview-modal">\n                   <div class="preview-wrapper_mobile">\n                        <div class="preview-wrapper_mobile-left">\n                        </div>\n                        <div class="preview-wrapper__img_wrapper">\n                            <img \n                                src="','" \n                                class="preview-wrapper_mobile__img-slot"\n                                alt="placeholder">\n                            <p class="preview-wrapper_mobile__img-title">','</p>    \n                            <img \n                                class="preview-wrapper__img_back"\n                                id="mobile-img" \n                                src="img/preview/mobile/mobile_medium.jpg" \n                                srcset="img/preview/mobile/mobile_large.jpg 3x,\n                                        img/preview/mobile/mobile_medium.jpg 2x,\n                                        img/preview/mobile/mobile_small.jpg 1x"\n                                alt="placeholder">\n                        </div>\n                        <div class="preview-wrapper_mobile-right">\n                        </div>\n                    </div>\n                    <div class="preview-wrapper_tshirt">\n                        <div class="preview-wrapper_tshirt-left">\n                        </div>\n                        <div class="preview-wrapper__img_wrapper">\n                            <img \n                                    src="','" \n                                    class="preview-wrapper_tshirt__img-slot"\n                                    alt="placeholder">\n                            <img\n                                    id="tshirt-img"\n                                    class="preview-wrapper__img_back"\n                                    src="img/preview/tshirt/tshirt_medium.jpg"\n                                    srcset="img/preview/tshirt/tshirt_large.jpg 3x,\n                                            img/preview/tshirt/tshirt_medium.jpg 2x,\n                                            img/preview/tshirt/tshirt_small.jpg 1x"\n                            alt="placeholder">\n                        </div>\n                        <div class="preview-wrapper_tshirt-right">\n                        </div>\n                    </div>\n                    <div class="preview-wrapper_computer">\n                        <div class="preview-wrapper_computer-left">\n                        </div>\n                        <div class="preview-wrapper__img_wrapper">\n                            <img \n                                    src="','" \n                                    class="preview-wrapper_computer__img-slot"\n                                    alt="placeholder">\n                            <img\n                                    id="computer-img"\n                                    class="preview-wrapper__img_back"\n                                    src="img/preview/computer/computer_medium.jpg"\n                                    srcset="img/preview/computer/computer_large.jpg 3x,\n                                            img/preview/computer/computer_medium.jpg 2x,\n                                            img/preview/computer/computer_small.jpg 1x"\n                            alt="placeholder">\n                        </div>\n                        <div class="preview-wrapper_computer-right">\n                        </div>\n                    </div>\n                </article>\n                \n                ',"\n                ","\n\n            </section>\n        "]);return Ge=function(){return e},e}function He(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(n,!0).forEach(function(t){Je(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ke="Download",qe="Logos.zip",Ye="authredirect=true",Ze="customize_auth=true",$e=["","_white","_black","_transparent"],Xe=ne.a.getSetting(ne.d.DISABLE_SIGN_IN),et=ne.a.getSetting(ne.d.ENABLE_PREMIUM),tt="Sign in to Download ".concat(et?"":"& Save"),nt=et?"Upgrade to save & customize more":Xe?"Sign in to save & customize more":"Customize more";class st extends s.a{constructor(){super(),Je(this,"state",void 0),Je(this,"fonts",void 0),Je(this,"style",void 0),Je(this,"selectedLogoMetadata",void 0),Je(this,"selectedDoc",void 0),Je(this,"fontsPromise",void 0),Je(this,"authController",void 0),Je(this,"iconAttributionData",void 0),Je(this,"attributionElement",void 0),Je(this,"parsedStore",void 0),Je(this,"analytics",void 0),Je(this,"colorPalettes",void 0),Je(this,"randomColorNumbers",void 0),Je(this,"randomFontNumbers",void 0),Je(this,"attributionElementButton",void 0),Je(this,"previewWrapperEle",void 0),Je(this,"savingLoader",void 0),Je(this,"imagesLoadedCounter",void 0),Je(this,"userFlagsPromise",void 0),Je(this,"userFeaturesProperties",void 0),Je(this,"firstTimeUpgrade",void 0),Je(this,"savedProjectId",void 0),Je(this,"featureService",te.b.getInstance()),this.downloadLogo=this.downloadLogo.bind(this),this.handleVariations=this.handleVariations.bind(this),this.createDownloadVariations=this.createDownloadVariations.bind(this),this.showIconAttribution=this.showIconAttribution.bind(this),this.undo=this.undo.bind(this),this.onImagesLoaded=this.onImagesLoaded.bind(this),this.customizeFurther=this.customizeFurther.bind(this),this.handleCancelUpgrade=this.handleCancelUpgrade.bind(this),this.handleUpgradeClick=this.handleUpgradeClick.bind(this),this.openInPostEditor=this.openInPostEditor.bind(this),this.getProjectSavedEventData=this.getProjectSavedEventData.bind(this),this.getSavingProjectLoader=this.getSavingProjectLoader.bind(this),this.onSparkFreeImageLoad=this.onSparkFreeImageLoad.bind(this),this.continueToSpark=this.continueToSpark.bind(this),this.isUpgradedUser=this.isUpgradedUser.bind(this),this.openInCurrentBrowserTab=this.openInCurrentBrowserTab.bind(this);const e=window.location.search;this.authController=re.a.getInstance(),this.analytics=r.c.getInstance(),this.imagesLoadedCounter=0,this.firstTimeUpgrade=!1,this.savedProjectId="",this.parsedStore=Object(o.d)(),this.shouldPreviewPageVisible(e)}async shouldPreviewPageVisible(e){let t=!1;await this.authController.isUserSignedIn()&&(await this.featureService.allFeatureLoaded(),t=this.featureService.hasFeature("show-logo-maker-dropdown")||this.featureService.hasFeature("redirect-to-logo-maker")),t?Object(S.a)("vaadin-router-go",window,{pathname:window.spldRouter.urlForPath("/")}):this.initializePreview(e)}initializePreview(e){const t=this.parsedStore;if(Object(o.a)(i.a.preview)){this.fontsPromise=Object(o.e)(),this.fontsPromise.then(()=>{ne.c.info("fonts loaded"),this.fonts=Se.TheoDocumentUtils.getFontsForStyle(t.visualStyle),this.selectedDoc=Se.TheoDocumentUtils.encodeJsonToDoc(t.preview.selectedDocJson);const n=Se.TheoDocumentUtils.getColorPaletteId(this.selectedDoc);this.colorPalettes=ye.a.filter(e=>e.name===t.visualStyle)[0].palettes.filter(e=>e.id!==n),this.randomColorNumbers=Object(o.j)(this.colorPalettes.length),this.randomFontNumbers=Object(o.j)(this.fonts.length),this.postSignUp(t=>{if(t)if(this.fromSignUp(e)){this.authController.sendLoginAnalytics(),this.createDownloadVariations(this.selectedDoc);const e=Object(o.d)();Object(o.k)(We({},e,{userInitiatedSignUpDownload:!1}))}else this.fromCustomizeSignUp(e)&&(this.authController.sendLoginAnalytics(),this.openInPostEditor())}),this.setupUndoDB()}),this.selectedLogoMetadata=t.preview.metadata,this.style=t.preview.style,this.style.appliedFontNames=this.style.appliedFontNames.filter(e=>e),this.iconAttributionData=Se.TheoDocumentUtils.getImageMediaMetadata(t.selectedSymbolMetadata);const n={signedIn:!1,imgURL:this.parsedStore.preview.imgURL,whiteImgUrl:this.parsedStore.preview.whiteImgUrl,blackImgUrl:this.parsedStore.preview.blackImgUrl,transparentImageUrl:this.parsedStore.preview.transparentImageUrl};this.authController.isUserSignedIn().then(e=>{n.signedIn=e,e&&(this.userFlagsPromise=this.authController.getSparkUserProps(this.authController.getCurrentUser())),this.setState(n)}),window.scrollTo(0,0)}else Object(S.a)("vaadin-router-go",window,{pathname:window.spldRouter.urlForPath("/")})}fromSignUp(e){const{userInitiatedSignUpDownload:t}=Object(o.d)();return e==="?".concat(Ye)&&t}fromCustomizeSignUp(e){return e==="?".concat(Ze)}postSignUp(e){this.authController.isUserSignedIn().then(e)}setupUndoDB(){const e=We({},Object(o.d)(),{undoDB:{events:[]}});Object(o.k)(e)}showIconAttribution(e){"visible"===this.attributionElement.style.visibility?this.attributionElement.style.visibility="hidden":(this.attributionElement.style.visibility="visible",this.analytics.publish(r.b.analyticsPressedIconAttribution,{},r.g))}downloadLogo(e){Xe?this.createDownloadVariations(this.selectedDoc):this.checkLoginAndDownload()}checkLoginAndDownload(){this.authController.isUserSignedIn().then(e=>{e?this.createDownloadVariations(this.selectedDoc):this.analytics.publish(r.b.analyticsPressedSignUpDownload,{},r.g,!1,()=>{this.saveLogoAndState(),this.doLogin(Ye)})})}doLogin(e){this.authController.login(e)}saveLogoAndState(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Se.TheoDocumentUtils.encodeToJson(this.selectedDoc),n=We({},Object(o.d)(),{userInitiatedSignUpDownload:e,preview:{selectedDocJson:t,imgURL:this.state.imgURL,whiteImgUrl:this.state.whiteImgUrl,blackImgUrl:this.state.blackImgUrl,transparentImageUrl:this.state.transparentImageUrl,style:this.style,docId:this.selectedLogoMetadata.id,metadata:this.selectedLogoMetadata}});Object(o.k)(n)}createDownloadVariations(e){const t=ee.a.getImgUrlPromises(e,this.selectedLogoMetadata,!0,!1),n=this.parsedStore.businessName,s=n?"".concat(n.replace(".",""),"-logos"):qe,i=Object(o.b)(),a=this.createLogoInfoText();t.then(e=>{const t=e.map(e=>e.previewImg);"Desktop"===i?Xe||et?this.downloadAsZip(t,s,a):this.openInPostEditor(!0):t.forEach((e,t)=>{const n="image/jpeg"===e.type?".jpeg":".png",o="".concat(s,"_").concat($e[t]).concat(n);this.downloadImageFromUrl(window.URL.createObjectURL(e),o)}),this.logExportedAnalytics()})}createLogoInfoText(){return"\n            Fonts used: ".concat(this.style.appliedFontNames," \n\n            Colors used: ").concat(this.style.palette.colors,"  \n\n            ").concat(this.selectedLogoMetadata.hasLogo?"Icon url: ".concat(this.iconAttributionData.sourceURL):"","  \n        ")}async downloadAsZip(e,t,n){const s=new Ie.a;e.forEach((e,n)=>{const o="image/jpeg"===e.type?".jpeg":".png";s.file("".concat(t).concat($e[n]).concat(o),e,{base64:!0})}),s.file("logo_info.txt",n),s.generateAsync({type:"blob"}).then(e=>Object(je.saveAs)(e,t))}downloadImageFromUrl(e,t){const n=document.createElement("a");document.body.appendChild(n),n.href=e,n.download=t,n.click(),setTimeout(()=>{document.body.removeChild(n)},500)}handleVariations(e){this.getLogoVariation(e.currentTarget.dataset.variation)}async getLogoVariation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.selectedDoc||await this.fontsPromise;const n="color"===e?this.getColorVariationForLogo(this.selectedDoc,t):this.getFontVariationForLogo(this.selectedDoc,t),s=(await n).map(e=>e.previewImg);Se.TheoDocumentUtils.setTransparency(this.selectedDoc,1),this.setState({imgURL:s[0],whiteImgUrl:s[1],blackImgUrl:s[2],transparentImageUrl:s[3]}),t||this.analytics.publish("color"===e?r.b.analyticsPressedColorShuffle:r.b.analyticsPressedFontShuffle,{},r.g)}getColorVariationForLogo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t||this.getRandomPalette();Se.TheoDocumentUtils.setColorPalette(e,n,{delay:0,shuffle:!0},this.selectedLogoMetadata);const s=ee.a.getImgUrlPromises(e,this.selectedLogoMetadata,!0);return t||this.addUndoEvent(this.style.palette,xe),this.style.palette=n,s}getFontVariationForLogo(e,t){const n=e.firstPage.root.filterByControllerKind(_e.a.TypeLockupController.KIND),s=t?t.map(e=>_e.a.Host.fontProvider.descriptorForPostScriptName(e)):this.getRandomFonts(n.length),o=[];n.forEach((e,t)=>{const n=s[t];Se.TheoDocumentUtils.applyFontToForma(e,n),o.push(n.postScriptName)});const i=ee.a.getImgUrlPromises(e,this.selectedLogoMetadata,!0);return t||this.addUndoEvent(this.style.appliedFontNames,Fe),this.style.appliedFontNames=o,i}getRandomPalette(){this.randomColorNumbers.length<=0&&(this.randomColorNumbers=Object(o.j)(this.colorPalettes.length));const e=this.randomColorNumbers.pop();return this.colorPalettes[e]}getRandomFonts(e){const t=[];let n=e;for(;n>0;){this.randomFontNumbers.length<e&&(this.randomFontNumbers=Object(o.j)(this.fonts.length));const s=this.randomFontNumbers.pop();t.push(this.fonts[s]),n-=1}return t}addUndoEvent(e,t){const n={eventType:t,eventData:e},s=Object(o.d)();s.undoDB.events.push(n);const i=We({},s);Object(o.k)(i)}async isUpgradedUser(){if(et){return this.userFeaturesProperties||(this.userFeaturesProperties=await this.userFlagsPromise),this.userFeaturesProperties.userData.features["fakeupgraded-logomaker-user"]}return!1}customizeFurther(){this.authController.isUserSignedIn().then(async e=>{if(e)if(et){this.userFeaturesProperties||(this.userFeaturesProperties=await this.userFlagsPromise),this.userFeaturesProperties.userData.features["fakeupgraded-logomaker-user"]?(this.firstTimeUpgrade=!1,this.openInPostEditor()):(this.firstTimeUpgrade=!0,this.setState({showUpgradeOptions:!0,showSavingProjectLoader:!1,showContinueSparkButton:!1}))}else this.openInPostEditor();else this.doLogin(Ze)}),r.c.getInstance().publish(r.b.analyticsCustomizeFurther,{},r.g)}openInPostEditor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({showSavingProjectLoader:!0,showUpgradeOptions:!1,showContinueSparkButton:!1}),this.saveLogoAndState(!1),Object(o.i)(ee.a).then(t=>{this.savedProjectId=t,this.setState({showSavingProjectLoader:!e,showUpgradeOptions:!1,showContinueSparkButton:!e});const n=this.getProjectSavedEventData();if(r.c.getInstance().publish(r.b.analyticsLogoMakerProjectSaved,n,r.g),e){const e=this.savedProjectId?"post/".concat(this.savedProjectId):"",t="".concat(ne.a.getSetting(ne.d.SPARK_SERVER_ENDPOINT),"/sp/design/").concat(e,"?workflow=logomaker&autoDownload=true");window.open(t,"_blank")||this.openInCurrentBrowserTab(t)}})}openInCurrentBrowserTab(e){window.location.href=e}continueToSpark(){const e=this.savedProjectId?"post/".concat(this.savedProjectId):"",t="".concat(ne.a.getSetting(ne.d.SPARK_SERVER_ENDPOINT),"/sp/design/").concat(e);window.open(t,"_blank"),r.c.getInstance().publish(r.b.analyticsContinueToSpark,{},r.g)}getProjectSavedEventData(){const e=this.authController.getProfile();return{contextualData1:"userguid:".concat(e.userId),contextualData2:"isUpgradedUser:".concat(!!et),contextualData3:"templateId:".concat(this.selectedLogoMetadata.id)}}undo(){const e=Object(o.d)(),t=e.undoDB.events;if(t&&t.length>0){const t=e.undoDB.events.pop();this.getLogoVariation(t.eventType,t.eventData),Object(o.k)(e);const n={contextualData1:"undoType:".concat(t.eventType)};r.c.getInstance().publish(r.b.analyticsPressedUndo,n,r.g)}}render(e){let{domRender:t}=e;const{imgURL:n,signedIn:s,whiteImgUrl:o,blackImgUrl:i,showUpgradeOptions:a,showSavingProjectLoader:r}=this.state,l=s||Xe?Ke:tt,c=et?nt:s?"Customize more":nt,d=this.selectedLogoMetadata.hasLogo;return t(Ge(),"intro-view intro-preview intro-view_is-modal-visible",n,De,this.handleVariations,Ee,this.handleVariations,Ue,this.undo,Ce,d?Object(ke.a)(ze(),this.showIconAttribution,Le):null,d?Object(ke.a)(Me(),this.iconAttributionData.title.charAt(0).toUpperCase()+this.iconAttributionData.title.slice(1),this.iconAttributionData.ownerName,this.iconAttributionData.sourceName,this.iconAttributionData.licenseType,this.iconAttributionData.sourceURL):null,p,this.downloadLogo,l,s||Xe?Object(ke.a)(Ve(),this.customizeFurther,c):null,n,this.parsedStore.businessName,i,o,a?this.getUpgradeModal():null,r?this.getSavingProjectLoader():null)}getUpgradeModal(){return this.analytics.publish(r.b.analyticsPricingDisplayed,{},r.g),Object(ke.a)(Be(),this.handleCancelUpgrade,this.handleUpgradeClick)}getSavingProjectLoader(){const e=Object(ke.a)(Ae(),"Hang tight, we're saving your logo to Creative Cloud Express"),t=Object(ke.a)(Re(),this.continueToSpark);return Object(ke.a)(Te(),et&&this.firstTimeUpgrade?Object(ke.a)(Ne()):null,this.state.showContinueSparkButton?t:e)}handleUpgradeClick(e){const t=this.getProjectSavedEventData();this.analytics.publish(r.b.analyticsUserUpgradedToPremium,t,r.g),this.setSparkFeature().then((e,t,n)=>{200===n.status&&(this.userFeaturesProperties.userData.features.__sequence=e.updatedSequences.features)}).catch(e=>{409===e.status?this.retryUpdateFeatures():ne.c.error("Failed to update user features")}),this.openInPostEditor()}setSparkFeature(){return this.userFeaturesProperties.userData.features["fakeupgraded-logomaker-user"]=!0,this.authController.setSparkUserProps(this.authController.getCurrentUser(),{features:{"fakeupgraded-logomaker-user":!0,__sequence:this.userFeaturesProperties.userData.features.__sequence}})}retryUpdateFeatures(){this.userFlagsPromise=this.authController.getSparkUserProps(this.authController.getCurrentUser()),this.userFlagsPromise.then(e=>{this.userFeaturesProperties=e,this.setSparkFeature().then((e,t,n)=>{200===n.status&&(this.userFeaturesProperties.userData.features.__sequence=e.updatedSequences.features)}).catch(e=>{409===e.status?ne.c.error("Conflicts in updating user features"):ne.c.error("Failed to update user features")})})}handleCancelUpgrade(e){this.analytics.publish(r.b.analyticsUpgradeDeclined,{},r.g),this.setState({showUpgradeOptions:!1})}didRender(){this.attributionElement=this.find("[attribution-toolTip]"),this.attributionElementButton=this.find("[icon-attribution]"),this.previewWrapperEle=this.find("#preview-modal"),this.savingLoader=this.find("#saving-loader"),Object(o.g)();const e=this.find("#mobile-img"),t=this.find("#tshirt-img"),n=this.find("#computer-img"),s=this.find("#spark-free-img");e.onload=this.onImagesLoaded,t.onload=this.onImagesLoaded,n.onload=this.onImagesLoaded,s?s.onload=this.onSparkFreeImageLoad:this.onSparkFreeImageLoad(),document.onclick=e=>{if(window.location.pathname.includes(i.a.preview)){const t=e.target;this.notIconElements(t)&&"visible"===this.attributionElement.style.visibility&&(this.attributionElement.style.visibility="hidden")}}}onSparkFreeImageLoad(){for(let e=0;e<1.1;e+=.2)setTimeout(()=>{this.savingLoader&&(this.savingLoader.style.opacity=e)},10)}onImagesLoaded(e){if(this.imagesLoadedCounter+=1,3===this.imagesLoadedCounter)for(let e=0;e<1.1;e+=.2)setTimeout(()=>{this.previewWrapperEle.style.opacity=e},100)}notIconElements(e){return this.attributionElement&&e!==this.attributionElement&&!this.attributionElement.contains(e)&&e!==this.attributionElementButton&&!this.attributionElementButton.contains(e)}logExportedAnalytics(){const e=Object(o.l)(this.parsedStore),t={contextualData1:"templateId:".concat(this.selectedLogoMetadata.id),contextualData2:e.industry,contextualData3:e.businessName,contextualData4:e.tagLine,contextualData5:e.selectedSymbol,contextualData6:e.visualStyle,contextualData7:"colorPaletteUsed:".concat(this.style.palette.name),contextualData8:"fontsUsed:[".concat(this.style.appliedFontNames.join(","),"]"),contextualData9:"expressAppName:LogoMaker",contextualData10:"userSignedIn:".concat(!Xe)};this.analytics.publish(r.b.analyticsLogoMakerProjectExported,t,r.g),this.analytics.publish(r.b.analyticsProjectExported,t,r.g)}}st.define("intro-preview-view");var ot=st,it=n(546);n.d(t,"c",function(){return y}),n.d(t,"f",function(){return C}),n.d(t,"b",function(){return X}),n.d(t,"e",function(){return fe}),n.d(t,"d",function(){return ot}),n.d(t,"a",function(){return it.a})},713:function(e,t,n){var s=n(714);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(42)(s,o);s.locals&&(e.exports=s.locals)},714:function(e,t,n){},715:function(e,t,n){var s=n(716);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(42)(s,o);s.locals&&(e.exports=s.locals)},716:function(e,t,n){},717:function(e,t,n){var s=n(718);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(42)(s,o);s.locals&&(e.exports=s.locals)},718:function(e,t,n){},719:function(e,t,n){var s=n(720);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(42)(s,o);s.locals&&(e.exports=s.locals)},720:function(e,t,n){},755:function(e,t,n){var s=n(756);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(42)(s,o);s.locals&&(e.exports=s.locals)},756:function(e,t,n){},826:function(e,t,n){var s=n(827);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(42)(s,o);s.locals&&(e.exports=s.locals)},827:function(e,t,n){}},[[861,67,30,10,53,11,2,21,51,63,35,24,16,7,25,44,55,22,61,57,4,42,40,38,33,15,45,29,28,59,60,1,26,46,65,32,49,62,54,31,9,17,0,41,58,19,50,3,27,13,39,64,56,37,6,48,5,8,47,34,12,18,23,66,52,14,20,36]]]);
//# sourceMappingURL=logomaker-entry_aabdebcb-74868d6e.js.map