(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{14:function(e,t,n){"use strict";n(39);var o=n(352);n.d(t,"a",function(){return o.a}),n.d(t,"b",function(){return o.b});n(520)},205:function(e,t,n){"use strict";n(705);var o=n(14);const r="spld-loader",i="".concat(r,"__icon"),s=("".concat(r,"__icon-shadow"),"".concat(r,"__text"));function a(){const e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <div class="','">\n                <span class="','">','</span>\n                <span class="','"></span> \n            </div>\n        ']);return a=function(){return e},e}class l extends o.a{static get attrToProp(){return{message:{type:String,observe:!0}}}render(e){let{domRender:t,message:n}=e;return t(a(),r,s,n||"",i)}}l.define(r);var c=l;n.d(t,"a",function(){return c})},206:function(e,t,n){"use strict";n.d(t,"a",function(){return o});const o=(e,t,n)=>{const o=n?new CustomEvent(e,{detail:n||{}}):new Event(e);t.dispatchEvent(o)}},262:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(2);class r{constructor(){var e,t,n;n={},(t="tmpFiles")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}mimeTypeForFileAtPath(e){let t=this.tmpFiles[e];return t?t.mimeType:null}writeJsonContentToTempFile(e){let t="tmp/".concat(o.GUIDUtils.makeGUID());return this.tmpFiles[t]={path:t,content:e,mimeType:"application/json"},t}readJsonContentFromFile(e){let t=this.tmpFiles[e];return t?t.content:null}deleteTempFile(e){delete this.tmpFiles[e]}fileUrlForPath(e){return e}fileExists(e){return!!this.tmpFiles[e]}useJsonDocumentEncoding(){return!0}}},351:function(e,t,n){"use strict";n(695);var o=n(14);n.p,n.p,n.p,n.p,n.p,n.p,n.p;const r="spld-icon",i="".concat(r,"__use");function s(){const e=l(["",""]);return s=function(){return e},e}function a(){const e=l(['<svg class="','">\n            <use class="','" href="','"></use>\n        </svg>']);return a=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}class c extends o.a{static get attrToProp(){return{"icon-name":{type:String,observe:!0,require:!0}}}render(e){let{domRender:t,iconName:n,svg:o}=e;const l="#".concat(n),c="".concat(r," ").concat(r,"_").concat(n),u=o(a(),c,i,l);return t(s(),u)}}c.define(r)},353:function(e,t,n){"use strict";n(693);var o=n(14);n(351);const r="sp-logo",i=r,s="".concat(i,"__img"),a="".concat(i,"__label");function l(){const e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <spld-icon class="','" icon-name="','"></spld-icon>\n            <span class="','">',"</span>\n        "]);return l=function(){return e},e}class c extends o.a{static get attrToProp(){return{label:{type:String,observe:!0}}}render(e){let{domRender:t,label:n}=e;return t(l(),s,r,a,n)}}c.define(i);var u=c;n.d(t,"a",function(){return u})},354:function(e,t,n){"use strict";n(699);var o=n(14);const r="spld-button";function i(){const e=a(['\n            <button id="','" class="','" type="','">',"</button>\n        "]);return i=function(){return e},e}function s(){const e=a(['\n            <button id="','" class="','" type="','" disabled>',"</button>\n        "]);return s=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}class l extends o.a{static get attrToProp(){return{id:{type:String,observe:!0},label:{type:String,observe:!0},mode:{type:String},disabled:{type:Boolean,observe:!0}}}render(e){let{domRender:t,id:n="",mode:o="",label:a,disabled:l}=e;return t(l?s():i(),n,r,o,a)}}l.define(r);var c=l;n.d(t,"a",function(){return c})},355:function(e,t,n){"use strict";n(701),n(170);var o=n(14);const r="spld-visual-style-card",i="".concat(r,"__native-input"),s="".concat(r,"__container"),a="".concat(r,"__thumbnail"),l="".concat(r,"__text"),c="".concat(r,"__text__title");function u(){const e=h(['\n            <img src="','" alt="','" />\n        ']);return u=function(){return e},e}function d(){const e=h(['\n            <label class="','">\n                <input\n                    class="','"\n                    ?checked="','"\n                    type="radio" name="','"\n                    value="','"\n                >\n                <span class="','">\n                    <span class="','">\n                        ','\n                    </span>\n                    <span class="','">\n                        <h2 class="','">',"</h2>\n                    </span>\n                </span>\n            </label>\n        "]);return d=function(){return e},e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}class p extends o.a{static get attrToProp(){return{label:{type:String,observe:!0},"inp-name":{type:String,observe:!0},"imgs-path":{type:String,observe:!0},"is-selected":{type:Boolean,observe:!0}}}render(e){let{domRender:t,inpName:n,label:o,imgsPath:u,isSelected:h}=e;const p="".concat(r," ").concat(r,"_is-").concat(o.toLowerCase()),m=u.split(",").map(e=>this.renderImages(e,o));return t(d(),p,i,h,n,o,s,a,m,l,c,o)}renderImages(e,t){return Object(o.b)(u(),e,t)}}p.define(r);var m=p;n.d(t,"a",function(){return m})},356:function(e,t,n){"use strict";n(703);var o=n(14);const r="spld-select-icon-card",i="".concat(r,"__native-input"),s="".concat(r,"__container"),a="".concat(r,"__thumbnail");function l(){const e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <label class="','">\n                <input id="','" class="','" @click= "','" @change="','" ?checked="','" type="radio" name="','" value="','">\n                <span class="','">\n                    <img class="','" src="','" alt="','" />\n                </span>\n            </label>\n        ']);return l=function(){return e},e}class c extends o.a{static get attrToProp(){return{alt:{type:String,observe:!0},"img-src":{type:String,observe:!0},"inp-name":{type:String,observe:!0},"inp-id":{type:String,observe:!0},"is-selected":{type:Boolean,observe:!0},"svg-src":{type:String}}}render(e){let{domRender:t,imgSrc:n,alt:o,inpId:c,inpName:u,svgSrc:d,isSelected:h}=e;return t(l(),r,c,i,this,this,h,u,d,s,a,n,o)}}c.define(r);var u=c;n.d(t,"a",function(){return u})},357:function(e,t,n){"use strict";n(707),n(72);var o=n(14);const r="".concat("spld-madlib-input","__inp"),i="".concat("spld-madlib-input","__placeholder");function s(){const e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <span class="','">','</span>\n            <input\n                @input="','"\n                type="text"\n                name="','"\n                class="','"\n                placeholder="','"\n                value="','"\n            />\n        ']);return s=function(){return e},e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends o.a{constructor(){super(...arguments),a(this,"inpEle",void 0),a(this,"placeholderEle",void 0)}static get attrToProp(){return{"auto-focus":{type:Boolean,observe:!0},placeholder:{type:String},"inp-name":{type:String},"inp-value":{type:String}}}didRender(){this.inpEle=this.find("input"),this.placeholderEle=this.find("span"),this.updateInpWidth(),this.autoFocus&&this.inpEle.focus()}updateInpWidth(){const e=this.placeholderEle.offsetWidth;this.inpEle.style.width="".concat(e,"px")}onInput(e){this.placeholderEle.textContent=this.inpEle.value,this.updateInpWidth()}render(e){let{domRender:t,placeholder:n,inpName:o,inpValue:a}=e;return t(s(),i,a,this,o||"",r,n,a||"")}}l.define("spld-madlib-input");var c=l;n.d(t,"a",function(){return c})},53:function(e,t,n){"use strict";n(82);var o=n(206);n.d(t,"a",function(){return o.a})},545:function(e,t,n){"use strict";var o=n(353),r=(n(697),n(100),n(72),n(14));const i="spld-input",s="".concat(i,"__inp"),a="".concat(i,"__label");function l(){const e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <div class="','">\n                <input\n                    autofocus=','\n                    type="','"\n                    id="','"\n                    name="','"\n                    class="','"\n                    placeholder="','"\n                    value="','"\n                >\n                <label for="','" class="','">',"</label>\n            </div>\n        "]);return l=function(){return e},e}class c extends r.a{constructor(){var e,t,n;super(...arguments),n=void 0,(t="inpEle")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}static get attrToProp(){return{label:{type:String,observe:!0},"auto-focus":{type:Boolean,observe:!0},mode:{type:String},placeholder:{type:String},"inp-name":{type:String},"inp-value":{type:String}}}didRender(){this.inpEle=this.find("input"),this.autoFocus&&this.inpEle.focus()}render(e){let{domRender:t,mode:n,label:o,placeholder:r,inpName:c,inpValue:u}=e;const d=o.toLowerCase().replace(/[^A-Z0-9]+/gi,"_").replace(/^_+|_+$/g,""),h="".concat(d,"_inp");return t(l(),i,focus,n,h,c||h,s,r,u||"",h,a,o)}}c.define(i);var u=c,d=n(354),h=n(355),p=n(356),m=n(205),g=n(357);n.d(t,"a",function(){return o.a}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return d.a}),n.d(t,"g",function(){return h.a}),n.d(t,"f",function(){return p.a}),n.d(t,"d",function(){return m.a}),n.d(t,"e",function(){return g.a})},548:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(497),n(82),n(375),n(500),n(252),n(210),n(100),n(170),n(501),n(502),n(72),n(200);var o=n(261),r=n(262),i=n(10);const s=n(19),a=n(2),l=n(656),c=n(657),u=n(658),d=n(659);function h(){const e=a.Host,t=a.FontDescriptor,n=a.OrderedFontSet,h=a.SolidColor,p=a.TheoRect;let m,g,f,v;const y=new i.ColorThief,b=(a.MLPModel,i.Logging.channel("host"));let C=0;function w(){try{throw new Error}catch(e){return e.stack}}e.setCoreWrapper=function(e){return g=e},e.setFeatureController=function(e){return m=e},e.setPosterView=function(e){return f=e},e.setAuthoringContext=function(e){return v=e},e.logging={info(e){},error(e){},warning(e){},assertFailure(e){C<500&&("not expecting NaN as a coordinate value"===e?this.error("ASSERT FAILED: "+e,{stack:w()}):this.error("ASSERT FAILED: "+e),C++)},timeStamp:()=>(new Date).toISOString(),platformID:()=>"web",additionalPlatformInfo:()=>i.BrowserData.name+" "+i.BrowserData.fullVersion,getObjectClassNameForSingletonTracking:e=>e&&e.constructor&&e.constructor.name?e.constructor.name:"??",logToAnalytics(e,t){}},e.persistUtils=new r.a,e.resourceUtils={makeGUID(){const e=[];for(let t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},urlForResource:(e,t)=>"images/shapes/svg/"+t+".svg"},e.featureFlags={isPremiumThemesUnlocked:()=>!0};const F=[];var x,I;return e.pathUtils={artworkFromURL(e,t){const n=s.find(F,function(t){return t.url===e});if(n)return F.splice(F.indexOf(n),1),F.splice(0,0,n),n.artwork;{const n=new XMLHttpRequest;n.open("GET",e,!1),n.send();try{const o=a.SVGParserUtils.theoArtworkFromSVGData(n.responseText,t);return a.Host.pathUtils.cacheArtworkForURL(e,o),o}catch(t){return console.error("SVGParserUtils.theoArtworkFromSVGData threw. Url -"+e),null}}},cacheArtworkForURL:(e,t)=>(F.length>10&&F.pop(),F.splice(0,0,{url:e,artwork:t}),t),parseSVGXMLData(e,t){const n=new DOMParser;let o=n.parseFromString(e,"text/xml");o.rootElement||(o=n.parseFromString(e,"image/svg+xml")),function e(n){const o=n.localName.toLowerCase(),r={};for(let e=0;e<n.attributes.length;++e){const t=n.attributes[e];t.specified&&(r[t.name]=t.value)}t.beginElement(o,r);const i=n.textContent;i&&t.handleStringValue(i);for(let t=0;t<n.childNodes.length;t++)n.childNodes[t].nodeType===Node.ELEMENT_NODE&&e(n.childNodes[t]);t.endElement(o)}(o.rootElement)},parseStringToDouble(e){const t=parseFloat(e);return isNaN(t)&&a.CoreAssert.fail("parsing string "+e+" resulted in NaN"),t},matchesForRegexInString(e,t){const n=new RegExp(e,"g");return t.match(n)},firstMatchForRegexInString:(e,t)=>new RegExp(e,"g").exec(t)[0],absolutePathFromURL:function(e){return e},lastPathComponentFromURL:function(e){const t=e.split("/");return t[t.length-1]}},e.learning={statics:{cache:{}},loadLayoutSuggestionModel(){const e=l,t=new a.TheoMatrix([e.featureScalingMean]),n=new a.TheoMatrix([e.featureScalingStd]),o=e.labels,r=[];for(const t in e.layoutModels)if(e.layoutModels.hasOwnProperty(t)){const n=e.layoutModels[t],o=n.range,i=new a.TheoMatrix(n.coef),s=new a.TheoMatrix([n.intercept]);r.push(new a.RangedLayoutLinearModel(o[0],o[1],i,s))}return new a.LayoutSuggestionsLinearModel(t,n,o,r)},loadNNJSON(e){let t;return"Font"===e?t=c:"Shape"===e?t=u:"Role"==e&&(t=d),t},loadFontSuggestionLinearModel(){},updateFontSuggestionLinearModel(e){},updateFontSuggestionNNModel(e){}},e.fontProvider=function(){var o=new t(i.Fonts.getDefaultFont());o.availability=a.FontAvailability.LOADED;let r=new n,s=new n;return{loadOneFont:function(e){b.assert(!!e,"Invalid fontData."),b.assert(!r.find(function(t){return t.postScriptName===e.postScriptName}),'Font "'+e.postScriptName+'" already loaded.');var n=new t(e);n.availability=a.FontAvailability.LOADED,r.append(n),(!0===e.isPublic||m.featureEnabled("post-new-fonts"))&&s.append(n)},descriptorForPostScriptName:function(t){var n=r.find(function(e){return e.postScriptName===t});return n||(t===o.postScriptName?o:e.textModelUtils.defaultFont())},descriptorFromFontData:function(e){var n=r.find(function(t){return t.postScriptName===e.postScriptName});if(n)return n;var o=new t(e);return o.availability=a.FontAvailability.LOADED,r.append(o),o},getIncludedFonts:function(){return r},getSuggestableFonts:function(){return s},retrieveAvailableFonts:function(e){e([])},getFontData:function(e){return i.Fonts.getFontData(e.postScriptName)},loadFont:function(e){},loadMissingFonts:function(e){return i.Fonts.loadMissingFonts(e)}}}(),e.textModelUtils=(x=e.fontProvider,I=document.createElement("canvas").getContext("2d"),{defaultColor:function(){return h.BLACK},defaultFont:function(){return x.descriptorForPostScriptName("SourceSansPro-Black")},defaultFontSize:function(){return 12},measureInkBounds:function(e,t,n){if("\n"===e)return p.Zero;var o=x.getFontData(t);I.font=(o.style||"")+" "+(o.weight||"normal")+" "+n+"px "+(o.cssName||o.family);var r=I.measureText(e).width,i=n*o.capRatio;return new p(0,0,r,i)},measureInkBoundsWithTracking:function(e,t,n,o){if("\n"===e)return p.Zero;var r=x.getFontData(t);I.font=(r.style||"")+" "+(r.weight||"normal")+" "+n+"px "+(r.cssName||r.family);var i=I.measureText(e).width;i+=(e.length-1)*o*n;var s=n*r.capRatio;return new p(0,0,i,s)},getGlyphPositions:function(e,t,n){var o=x.getFontData(t);I.font=(o.style||"")+" "+(o.weight||"normal")+" "+n+"px "+(o.cssName||o.family);for(var r=I.measureText(e).width,i=e,s=[0],a=0;a<e.length;a++){i=i.substr(1);var l=r-I.measureText(i).width;s.push(l)}return s},fontHasClockwiseOutlines:function(e){return!0},textOutlines:function(){return null},rewindPath:function(e){return null},useOutlinesForKnockouts:function(e){return!1},measureBaselineBounds:function(e,t,n,o){return this.measureInkBoundsWithTracking(e,t,n,o)},isTextRightToLeft:function(e){return!1},splitOnWhiteSpace:function(e){for(var t=e.split(" "),n=[],o=0,r=0;r<t.length;r++){var i=t[r];if(0!==i.length){for(var s,a=e.indexOf(i),l=/\r|\n/g,c=-1,u=-1;null!=(s=l.exec(i));)c>-1?s.index!==u&&(n.push({start:a+o+c,length:u-c}),n.push({start:a+o+u,length:s.index-u}),c=s.index):(c=s.index)>0&&n.push({start:a+o,length:c}),u=l.lastIndex;c>-1?(n.push({start:a+c+o,length:u-c}),u<i.length&&n.push({start:a+u+o,length:i.length-u})):n.push({start:a+o,length:i.length}),o+=a+i.length,e=e.substr(a+i.length)}}return n},getWordClassRanges:function(){return[]}}),e.imageAnalysis=function(){const t={};let n=!0;const r=function(e,t,n){this.url=e,this.origUrl=n,this.isLoaded=!1,this.containsAlpha=t,this.image_scale_x_ratio=0,this.image_scale_y_ratio=0,this.saliencyImage=null,this.saliencyIntegral=[],this.saliencyLoaded=!1,e&&(this.imageLoadedPromise=new Promise(function(t,n){i.LoadImage.load(e).catch(n).done(t)}).then(function(e){this.img=e,this.image_scale_x_ratio=e.width/176,this.image_scale_y_ratio=e.height/176,this.focus=null,this.isLoaded=!0}.bind(this)))};return r.prototype.computeSaliency=function(){void 0===this.saliencyLoadedPromise&&void 0!==this.imageLoadedPromise&&(this.saliencyLoadedPromise=this.imageLoadedPromise.then(function(){const t=document.createElement("canvas"),n=t.getContext("2d");t.width=176,t.height=176,n.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,176,176);const o=t.toDataURL("image/png").replace("data:image/png;base64,",""),r=e.resourceUtils.makeGUID();return i.Saliency.getBoundingBoxAndMask(o,r).timeout(5e3,"SALIENCY_TIMEOUT").catch(function(e){return"SALIENCY_TIMEOUT"===e.message?b.error("Saliency.getBoundingBoxAndMask Timed out in 5000ms",{requestId:r}):b.error("Saliency.getBoundingBoxAndMask error:",{err:e,requestId:r}),{saliency:{boundingBoxRectangles:[]}}}).then(function(e){return Q.all([this.setFocusRegion(e.saliency.boundingBoxRectangles),this.setSaliencyImage(e.saliency.mask)])}.bind(this)).finally(function(){this.saliencyLoaded=!0}.bind(this))}.bind(this)))},r.prototype.getBoxAverage=function(e,t){Number.isInteger(e.minX)&&Number.isInteger(e.minY)&&Number.isInteger(e.maxX)&&Number.isInteger(e.maxY)||(e.minX=Math.round(e.minX),e.minY=Math.round(e.minY),e.maxX=Math.round(e.maxX),e.maxY=Math.round(e.maxY));const n=this.saliencyIntegral[0].length,o=this.saliencyIntegral.length;if(e.minX>n-2||e.minY>o-2)return 0;e.maxX>=n&&(e.maxX=n-1),e.maxY>=o&&(e.maxY=o-1);const r=(e.maxX-e.minX)*(e.maxY-e.minY),i=this.saliencyIntegral[e.minY][e.minX],s=this.saliencyIntegral[e.minY][e.maxX],a=this.saliencyIntegral[e.maxY][e.minX],l=[this.saliencyIntegral[e.maxY][e.maxX]-a-s+i];let c=0;return c=t?l[0]/r:l[0]/255/r},r.prototype.getIntegralImage=function(e,t,n){const o=document.createElement("canvas"),r=o.getContext("2d");o.width=t,o.height=n,r.drawImage(e,0,0,e.width,e.height,0,0,t,n);const i=[];function s(e,t,n,o,r){const i=n*t+o,s=e[i-t]||0;let a=e[i-1]||0,l=e[i-t-1]||0;i%t==0&&(a=0,l=0);const c=s+a+r-l;e[i]=c}!function(e,t,n,o){if(arguments.length<4)throw new Error("You should specify one output array: sum");for(let r=0;r<n;r++)for(let n=0;n<t;n++){const i=e[r*t*4+4*n];o&&s(o,t,r,n,i)}}(r.getImageData(0,0,t,n).data,t,n,i);const a=[];for(let e=0;e<n;e++){a[e]=[];for(let n=0;n<t;n++){const o=e*t+n;a[e][n]=i[o]}}return a},r.prototype.convertBase64ToImageElement=function(e,t){const n=Q.defer();t=t||"";const o=atob(e),r=o.length,i=Math.ceil(r/1024),s=new Array(i);for(let e=0;e<i;++e){const t=1024*e,n=Math.min(t+1024,r),i=new Array(n-t);for(let e=t,r=0;e<n;++r,++e)i[r]=o[e].charCodeAt(0);s[e]=new Uint8Array(i)}const a=new Blob(s,{type:t}),l=(window.URL||window.webkitURL).createObjectURL(a),c=new Image;return c.src=l,c.onload=function(){n.resolve(c)},c.onerror=function(e){n.reject(e)},n.promise},r.prototype.setFocusRegion=function(e){if(e&&e.length>0){const t=e[0];this.focus=p.fromXYWH(t.x/176,t.y/176,t.width/176,t.height/176)}else{b.warn("Did not find a salient region. Using fallback focus.");const e=176*this.image_scale_x_ratio,t=176*this.image_scale_y_ratio;this.focus=e>t?p.fromXYWH((e-t)/2,0,t,t):p.fromXYWH(0,(t-e)/2,e,e)}},r.prototype.setSaliencyImage=function(e){return e&&""!==e?this.convertBase64ToImageElement(e,"image/png").then(function(e){this.saliencyImage=e,this.saliencyIntegral=this.getIntegralImage(e,e.width,e.height)}.bind(this)):Q.resolve()},r.prototype.loaded=function(e){return this.isLoaded},r.prototype.whenLoaded=function(e){this.isLoaded?e():this.imageLoadedPromise&&this.imageLoadedPromise.then(function(){!1===this.isLoaded&&b.error("ERROR: imageLoadedPromise resolved but image hasn't finished loading."),e()}.bind(this))},r.prototype.whenAsyncFeaturesLoaded=function(e){this.saliencyLoaded?e():void 0===this.saliencyLoadedPromise?this.computeSaliency():this.saliencyLoadedPromise.then(function(){!1===this.saliencyLoaded&&b.error("ERROR: saliencyLoadedPromise resolved but image hasn't finished loading."),e()}.bind(this))},r.prototype.getFocus=function(){return this.focus},r.prototype.getWidth=function(){return void 0!==this.img?this.img.width:0},r.prototype.getHeight=function(){return void 0!==this.img?this.img.height:0},r.prototype.getUrl=function(){return this.url},r.prototype.getImageLoadedPromise=function(){return this.imageLoadedPromise},r.prototype.getSaliencyLoadedPromise=function(){return this.saliencyLoadedPromise},r.prototype.getSaliencyData=function(e,t){if(null!=this.saliencyImage){const n=document.createElement("canvas"),o=n.getContext("2d");n.width=e,n.height=t,o.drawImage(this.saliencyImage,0,0,this.saliencyImage.width,this.saliencyImage.height,0,0,e,t);const r=o.getImageData(0,0,e,t).data,i=[];for(let e=0;e<r.length;e+=4)i.push(r[e]);return i}return[]},r.prototype.getEdgeData=function(e,t){return[]},r.prototype.hasAlpha=function(){return this.containsAlpha},r.prototype.getImageColorData=function(e){return[]},r.prototype.getImageColors=function(e){if(!this.img||!this.img.src)return[h.BLACK];return y.getPalette(this.img,e).map(function(e){return i.ColorUtils.hex2SolidColor(i.ColorUtils.rgb2hex({r:e[0],g:e[1],b:e[2]}))})},r.prototype.getAverageEdge=function(e){if(e.maxX-e.minX<=0||e.maxY-e.minY<=0)return 0;const t=e.multiplyXY(1/this.image_scale_x_ratio,1/this.image_scale_y_ratio);return this.saliencyIntegral.length>0?this.getBoxAverage(t,!1):0},r.prototype.getFilterColor=function(e,t){return h.BLACK},r.prototype.getAverageColor=function(e,t){if(!f)return h.BLACK;if(!g)return;const n=g.getImageFormaForURL(this.origUrl);if(!n)return;const o=n.placement,r=e.transform(o),i=[r.evalXY(.1,.1),r.evalXY(.1,.9),r.evalXY(.3,.3),r.evalXY(.3,.7),r.evalXY(.5,.5),r.evalXY(.7,.3),r.evalXY(.7,.7),r.evalXY(.9,.9),r.evalXY(.9,.1)];let s=0,a=0,l=0,c=0,u=0;for(let e=i.length-1;e>=0;e--){const t=i[e],n=f.getImageColorAtPoint(t);n&&n.a>0&&(s++,a+=n.r/255,l+=n.g/255,c+=n.b/255,u+=n.a)}if(s<=0)return h.BLACK;return new h(a/s,l/s,c/s,u/s)},r.prototype.getFaceIntersections=function(e){return[]},{useCache(e){n=e},updateHostImageCacheKey(e,n){void 0!==t[e]&&(t[n]=t[e],delete t[e])},createHostImage(e,n,o){const s=i.URLBuilder.decodeUrl(e);if(void 0!==t[s])return t[s];{const i=new r(s,n,e);return t[s]=i,o&&i.computeSaliency(),i}},setShapeFormaTransparencyMask(e,t){if("Shape"!=e.kind)return null;const n=document.createElement("canvas"),r=n.getContext("2d"),i=e.clone(),s=t/(i.bounds.aspectRatio>1?i.bounds.width:i.bounds.height);i.placement=a.Matrix2D.scalingXY(s,s),i.style.colors.fieldPrimary=h.WHITE;const l=Math.round(i.frame.width),c=Math.round(i.frame.height);n.width=l,n.height=c,new o.a({documentSize:{width:l,height:c},renderScale:1,data:{forma:i,formaID:i.formaID,isImageBackgroundShape:!1,type:"shape"}}).renderInto(r,1,1,null);const u=r.getImageData(0,0,l,c).data,d=[];for(let e=3;e<u.length;e+=4)d.push(u[e]/255);e.maskImage=a.TheoMatrix.createMatrixFromList(d,l,c)}}}(),e.brandkitManager={brandkitForDocument:()=>v,brandkitForElement:(e,t)=>v},e.async={startTimer(e,t){setTimeout(t,1e3*e)},postOnMainThread(e,t){setTimeout(t,1e3*e)},getSystemUptimeInSeconds:()=>((new Date).getTime()-START_TIME)/1e3},e}},556:function(e,t,n){"use strict";var o=n(2);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e,t){r(this,"branch",void 0),r(this,"node",void 0),this.branch=e,this.node=t}reparent(e){if(e!==this.node){const t=this.node.childComponents.indexOf(this);t>=0?(e.childComponents.push(this),this.node.childComponents.splice(t,1),this.node=e,this.attachToNode()):o.CoreAssert.fail("internal error: component isn't attached to the node we think it is")}}update(e){const t=this.node.childComponents.indexOf(this);t<0?o.CoreAssert.fail("replaceWith: component isn't attached to the node we think it is"):e.node===this.node?(this.detachFromNode(),this.node.childComponents.splice(t,1,e),e.attachToNode()):o.CoreAssert.fail("replaceWith: only supports same-node replacement")}}class s extends i{constructor(e,t,n){var o,r,i;super(e,t),i=void 0,(r="dcxComponent")in(o=this)?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i,this.dcxComponent=n}attachToNode(){if(this.branch.dcxBranch.getComponentsOf(this.node.dcxNode).indexOf(this.dcxComponent)<0)try{this.branch.dcxBranch.moveComponent(this.dcxComponent,this.node.dcxNode)}catch(e){o.CoreAssert.fail("attachToNode: moveComponent() failed",e)}}detachFromNode(){this.branch.dcxBranch.getComponentsOf(this.node.dcxNode).indexOf(this.dcxComponent)>=0&&this.branch.retireComponent(this.dcxComponent)}get absolutePath(){return this.dcxComponent.absolutePath||""}get componentId(){return this.dcxComponent.id||""}get name(){return this.dcxComponent.name}get path(){return this.dcxComponent.path}get type(){return this.dcxComponent.type}get etag(){return this.dcxComponent.etag}get relationship(){return this.dcxComponent.relationship}get sourceHref(){return null}get mutableCopy(){return new s(this.branch,this.node,this.dcxComponent)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(e,t,n){a(this,"overrideID",void 0),a(this,"dcxNode",void 0),a(this,"parent",void 0),a(this,"branch",void 0),a(this,"childNodes",void 0),a(this,"childComponents",void 0),this.dcxNode=e,this.branch=t,this.parent=n,this.overrideID=t.getOverrideIDForNode(e),this.childNodes=t.dcxBranch.getChildrenOf(this.dcxNode).map(e=>new l(e,t,this)),this.childComponents=t.dcxBranch.getComponentsOf(this.dcxNode).map(e=>new s(t,this,e))}get absolutePath(){return this.dcxNode.absolutePath}get nodeId(){return this.overrideID||this.dcxNode.id}get name(){return this.dcxNode.name}set name(e){this.dcxNode.name=e}get path(){return this.dcxNode.path}set path(e){this.dcxNode.path=e}get type(){return this.dcxNode.type}set type(e){this.dcxNode.type=e}getValue(e){return this.dcxNode.getValue(e)}setValue(e,t){this.dcxNode.setValue(e,t)}removeValue(e){this.dcxNode.removeValue(e)}visit(e){let t=e(this);if(t)return t;for(var n=0;n<this.childNodes.length;n++)if(t=this.childNodes[n].visit(e))return t;return null}findComponent(e){return this.visit(t=>t.childComponents.find(t=>e(t))||null)}findNode(e){return this.visit(t=>e(t)?t:null)}setManifestFormatVersion(e){}setCompositeID(e){}setManifestProperty(e,t){}setDocumentSize(e,t){}}var c=n(262),u=n(97);class d extends i{constructor(e,t,n){var o,r,i;super(e,t),i=void 0,(r="params")in(o=this)?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i,this.params=n}attachToNode(){}detachFromNode(){}get absolutePath(){return""}get componentId(){return this.params.componentId||""}get name(){return this.params.name}get path(){return this.params.path}get type(){return this.params.type}get etag(){return""}get relationship(){return this.params.relationship}get sourceHref(){return this.params.sourceHref}get mutableCopy(){return new d(this.branch,this.node,this.params)}replaceWithReal(e){if(!e||!e.etag)return o.CoreAssert.fail("replaceWithReal: you need to pass an AdobeDCXComponent"),null;const t=new s(this.branch,this.node,e);return this.update(t),t}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return p});class p{constructor(e){h(this,"dcxBranch",void 0),h(this,"_root",void 0),h(this,"_retiredElement",void 0),h(this,"_componentPaths",{}),h(this,"_componentURLfn",void 0),h(this,"_overrideIDfn",void 0),this.dcxBranch=e.branch,this._retiredElement=e.retiredElement||null,this._componentURLfn=e.componentURLfn||null,this._overrideIDfn=e.overrideIDfn||null,this._root=new l(e.branch.rootNode,this,null)}getOverrideIDForNode(e){return this._overrideIDfn&&this._overrideIDfn(e)}registerContentForComponent(e,t){this._componentPaths[e]=o.Host.persistUtils.writeJsonContentToTempFile(t)}releaseRegisteredContent(){if(o.Host.persistUtils instanceof c.a)for(var e in this._componentPaths)o.Host.persistUtils.deleteTempFile(this._componentPaths[e]);else o.CoreAssert.warning("persist utils is not of a known type; releasing temp files won't happen");this._componentPaths={}}getDeferredComponents(){let e=[];return this._root.visit(t=>e.push.apply(e,t.childComponents.filter(e=>e instanceof d))),e}get root(){return this._root}getValue(e){return this.dcxBranch.rootNode.getValue(e)}get allComponents(){let e=[];return this._root.visit(t=>{e.push.apply(e,t.childComponents)}),e}appendNode(e,t,n){if(e=e||o.GUIDUtils.makeGUID(),!n||n instanceof l){let o=n||this._root,r=this.dcxBranch.addChild("",e,void 0,o.dcxNode);t&&(r.path=t);let i=new l(r,this,o);return o.childNodes.push(i),i}return o.CoreAssert.fail("appendNode: foreign node"),null}removeNode(e){if(e instanceof l)if(e.branch!==this)o.CoreAssert.fail("trying to remove a node from a branch it doesn't belong to");else if(e.parent){let t=e.parent.childNodes.indexOf(e);t<0?o.CoreAssert.fail("trying to remove a node from a parent it doesn't belong to"):(e.visit(e=>e.childComponents.forEach(e=>{e instanceof s&&this.retireComponent(e.dcxComponent)})),e.parent.childNodes.splice(t,1),this.dcxBranch.removeChild(e.dcxNode))}else o.CoreAssert.fail("can't remove the root node");else o.CoreAssert.fail("trying to remove a node that isn't really a node")}getChildrenOfNode(e){return o.CoreAssert.isTrue(!e||e instanceof l),e instanceof l?e.childNodes.concat():this._root.childNodes.concat()}getComponentsOfNode(e){return o.CoreAssert.isTrue(!e||e instanceof l),e instanceof l?e.childComponents.concat():this._root.childComponents.concat()}getComponentWithId(e){return this._root.findComponent(t=>t.componentId===e)}getPathForComponent(e){if(e instanceof i){const t=this._componentPaths[e.absolutePath];if(t)return t;if(this._componentURLfn){const t=this._componentURLfn(e);if(null!==t)return t}return o.CoreAssert.isTrue(!!e.componentId&&!!e.type),u.a.encodeComponentUrl(this.root.nodeId,e.componentId,e.type)}return o.CoreAssert.fail("passed in component isn't our type of component"),null}getComponentWithAbsolutePath(e){return this._root.findComponent(t=>t.absolutePath===e)}getNodeWithAbsolutePath(e){return this._root.findNode(t=>t.absolutePath===e)}addComponent(e,t,n,r,i,a,c,u,h){let p=a instanceof l?a.dcxNode:this.dcxBranch.rootNode,m=a&&a instanceof l?a:this._root;if(this._retiredElement){let e=this._retiredElement.getComponentsOf(this._retiredElement.rootNode).find(e=>e.id===t);if(e){this.dcxBranch.copyComponent(e,p);let t=new s(this,m,e);return m.childComponents.push(t),t}}if(c&&o.Host.persistUtils&&o.Host.persistUtils.fileExists(c)){const s={name:e,componentId:t||"",type:n,relationship:r,path:i,sourceFile:c,copy:u,sourceHref:h,node:m,content:o.Host.persistUtils.readJsonContentFromFile(c)};let a=new d(this,m,s);return m.childComponents.push(a),a}return o.CoreAssert.fail("addComponent: on web we can't add arbitrary components.."),null}moveComponent(e,t){return e instanceof i?(e.reparent(t||this._root),e):(o.CoreAssert.fail("updateComponent: requires a DCXDocumentComponent"),null)}retireComponent(e){"rendition"!==e.relationship&&"dom"!==e.relationship&&(this._retiredElement.allComponents().find(t=>t.id===e.id)||this._retiredElement.copyComponent(e))}updateComponent(e,t,n){if(!(e instanceof i))return o.CoreAssert.fail("updateComponent: requires a DCXDocumentComponent"),null;const r=this.getComponentWithId(e.componentId);if(!r)return o.CoreAssert.fail("updateComponent: passed component's ID isn't in the branch; can only update existing components"),null;let s=e;if(t){if(!o.Host.persistUtils||!o.Host.persistUtils.fileExists(t))return o.CoreAssert.fail("updateComponent: sourceFile can't be used because it's not a faux-temp-file"),null;s=new d(this,s.node,{name:s.name,componentId:s.componentId||"",type:s.type||"",relationship:s.relationship,path:s.path||"",sourceHref:s.sourceHref,node:s.node,sourceFile:t,copy:n,content:o.Host.persistUtils.readJsonContentFromFile(t)})}return r!==s&&r.update(s),s}}},690:function(e,t,n){var o=n(691);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},691:function(e,t,n){},693:function(e,t,n){var o=n(694);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},694:function(e,t,n){},695:function(e,t,n){var o=n(696);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},696:function(e,t,n){},697:function(e,t,n){var o=n(698);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},698:function(e,t,n){},699:function(e,t,n){var o=n(700);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},700:function(e,t,n){},701:function(e,t,n){var o=n(702);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},702:function(e,t,n){},703:function(e,t,n){var o=n(704);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},704:function(e,t,n){},705:function(e,t,n){var o=n(706);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},706:function(e,t,n){},707:function(e,t,n){var o=n(708);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},708:function(e,t,n){},757:function(e,t,n){var o=n(758);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(42)(o,r);o.locals&&(e.exports=o.locals)},758:function(e,t,n){},860:function(e,t,n){"use strict";n(757),n(82),n(72),n(200);var o=n(14),r=n(53),i=(n(351),n(99)),s=n(10),a=n(98),l=n(4),c=n(5),u=n(11);const d="spld-logo-preview",h="".concat(d,"__img");function p(){const e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <article class="','">\n                <img\n                    id="','"\n                    class="','"\n                    src=','\n                    @click="','"\n                    alt="logo preview"\n                    @contextmenu="','"\n                />\n            </article>\n        ']);return p=function(){return e},e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends o.a{constructor(){super(...arguments),g(this,"state",{previewImg:null,appliedStyle:null}),g(this,"originalPreviewImage",void 0),g(this,"originalAppliedStyle",void 0),g(this,"coreGenerator",void 0),g(this,"featureService",a.b.getInstance())}static get attrToProp(){return{"doc-id":{type:String},"is-signed-in":{type:Boolean}}}onConnect(){this.originalPreviewImage=this.previewImg,this.originalAppliedStyle=this.appliedStyle,this.coreGenerator=this.coreGenerator}async onClick(e){const{originalAppliedStyle:t,originalPreviewImage:n,docId:o,coreGenerator:a,metadata:d,isSignedIn:h}=this,{previewImg:p,appliedStyle:f}=this.state,v=f||t,y=v.businessFont?v.businessFont.postScriptName:void 0,b=v.taglineFont?v.taglineFont.postScriptName:void 0,C={appliedFontNames:[y,b],palette:v.palette};try{const t=a.getLogoDocForId(o),n=s.TheoDocumentUtils.encodeToJson(t),p=(await i.a.getImgUrlPromises(t,d,!0,!0)).map(e=>e.previewImg),f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(u.d)(),{preview:{style:C,docId:o,selectedDocJson:n,metadata:d,imgURL:p[0],whiteImgUrl:p[1],blackImgUrl:p[2],transparentImageUrl:p[3]}});Object(u.k)(f),h&&(this.featureService.hasFeature("show-logo-maker-dropdown")||this.featureService.hasFeature("redirect-to-logo-maker"))?this.dispatchEvent(new CustomEvent("PREVIEW_ITEM_CLICKED")):Object(r.a)("vaadin-router-go",window,{pathname:window.spldRouter.urlForPath("/preview")});const v={contextualData1:"templateId:".concat(d.id),contextualData2:"colorPaletteUsed:".concat(C.palette.name),contextualData3:"businessFontUsed:".concat(y||"None"),contextualData4:"sloganFontUsed:".concat(b||"None")};c.c.getInstance().publish(c.b.analyticsLogoSelected,v,c.h)}catch(e){l.c.error(e)}}render(e){let{domRender:t,docId:n,originalPreviewImage:o}=e;const r=this.state.previewImg||o;if(!r)return null;const i=window.URL.createObjectURL(r);return t(p(),d,n,h,i,this,this.onContextmenu)}onContextmenu(e){e.preventDefault()}}f.define(d)},99:function(e,t,n){"use strict";n(100),n(170),n(72),n(200);var o=n(557),r=n(10),i=n(558),s=n(2),a=n.n(s),l=n(263),c=n(551),u=n.n(c),d=n(19),h=n.n(d),p=n(15),m=n.n(p),g=n(11),f=n(4);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y="logo",b=28,C=["this is the optional slogan!"],w=["business name","b","bb","bbb"],F=/(\r\n\t|\n|\r\t|\s\n)/gm,x=" ",I=Object(g.c)(),S=e=>0===Object.keys(e).length;class P{constructor(e){v(this,"userPreferences",void 0),v(this,"colorPalette",void 0),v(this,"fonts",void 0),v(this,"randomColorNumbers",void 0),v(this,"randomFontNumbers",void 0),v(this,"generatedLogos",void 0),this.userPreferences=e;const t=this;this.colorPalette=l.a.filter(e=>e.name===t.userPreferences.visualStyle)[0].palettes,this.fonts=r.TheoDocumentUtils.getFontsForStyle(this.userPreferences.visualStyle);let n=this.userPreferences.businessName.length,o=this.userPreferences.tagLine.length;this.logoComps=h.a.shuffle(u.a.logos.filter(e=>n>=e.minBusiness&&o>=e.minSlogan)),this.randomColorNumbers=Object(g.j)(this.colorPalette.length),this.generatedLogos={}}maxPages(){return Math.ceil(this.logoComps.length/I)}generateLogos(e){const t=Date.now(),n=this.getLogoCompsForUserPref(e);return f.c.info("TIME TOOK to get logo template docs: ",Date.now()-t),this.getLogosFromTemplateDocs(n)}getLogosFromTemplateDocs(e){let t={},n=this.userPreferences.icons[0];return e.forEach((e,o)=>{let{doc:r,metadata:i}=e;const s=a.a.TheoDocumentUtils.duplicateDocument(r);let l=this.createLogoForCompositionAndIcon(s,n,i);if(l){if(this.isLegibleLogo(l)){let e=P.generatePreviewForDoc(l.doc,l.appliedStyle,l.metadata);t[s.uuid]=e}}}),t}createLogoForCompositionAndIcon(e,t,n){const o=this.getIconFormaToReplace(e);if(o&&!t)return null;const i=this.getBusinessLockup(e),s=this.getTagLineLockup(e);if(o){const n=r.TheoDocumentUtils.getImageMediaMetadata(t.info);r.TheoDocumentUtils.replaceIconForma(e,o,t.iconSvg,t.svgUrl,n)}if(null!=i&&i.length>0&&i.forEach(e=>{const t=this.userPreferences.businessName;r.TheoDocumentUtils.updateLockupText(e,t?this.getBusinessNameText(e,t):"")}),s){const e=this.userPreferences.tagLine;r.TheoDocumentUtils.updateLockupText(s,e||"")}const a={doc:e,appliedStyle:this.inferStyleForLogo(e,n,i,s),metadata:n};return this.generatedLogos[e.uuid]=a,a}isLegibleLogo(e){let{businessFontSizes:t,taglineFontSize:n}=e.appliedStyle;return!!this.legibleFontSize(n)&&(t&&t.forEach(e=>{if(!this.legibleFontSize(e))return!1}),!0)}legibleFontSize(e){return!(e&&e<b)}getLogoDocForId(e){return this.generatedLogos[e].doc}generatePNGImage(e,t){let n=this.getFullCanvasColor(e),o=!!n;o||e.firstPage.root.controller.setBackgroundTransparency(0);let r={appliedStyle:t,docId:e.uuid};return P.generatePreviewForDoc(e,t).then(t=>{let r=t.previewImg,i=window.URL.createObjectURL(r);if(o){let t=document.createElement("canvas"),o=e.firstPage.getExportData().pixelDimensions;return t.width=o.width,t.height=o.height,this.setFullCanvasToTransparent(t,i,n)}return m.a.resolve(r)}).then(function(e){return r.previewImg=e,r})}getFullCanvasColor(e){let t=a.a.TypeLockupUtils.getFullCanvasLockups(e.firstPage.root);return t.length>0&&1==t[0].lockupStyle.backingOpacity?t[0].lockupStyle.colors.fieldSecondary:null}setFullCanvasToTransparent(e,t,n){let o=m.a.defer(),r=new Image;return r.onload=function(){let t=e.getContext("2d");t.drawImage(r,0,0);let i,s=e.width,a=e.height,l=t.getImageData(0,0,s,a),c=255*n.red,u=255*n.green,d=255*n.blue,h=0===c?0:c-1,p=0===u?0:u-1,m=0===d?0:d-1;for(let e=0;e<a;e++)for(let t=0;t<s;t++)i=4*(e*s+t),l.data[i+0]>=h&&l.data[i+0]<=c+1&&l.data[i+1]>=p&&l.data[i+1]<=u+1&&l.data[i+2]>=m&&l.data[i+2]<=d+1&&255===l.data[i+3]&&(l.data[i+0]=0,l.data[i+1]=0,l.data[i+2]=0,l.data[i+3]=0);t.putImageData(l,0,0),this.canvasToBlob(e).then(function(e){o.resolve(e)})},r.src=t,o.promise}canvasToBlob(e,t){let n=m.a.defer();return e.toBlob?e.toBlob(function(e){n.resolve(e)},t):n.resolve(e.msToBlob()),n.promise}inferStyleForLogo(e,t,n,o){const i=this.getRandomPalette(),[s,a]=this.getRandomFonts(t.fontRestriction);r.TheoDocumentUtils.setColorPalette(e,i,{delay:0,shuffle:!0},t);let l,c=[];return null!=n&&n.length>0&&n.forEach(e=>{r.TheoDocumentUtils.applyFontToForma(e,s),this.validateMSL(e),r.TheoDocumentUtils.negateScaleFromTemplates(e),c.push(r.TheoDocumentUtils.getFontSize(e)),e.controller.snapSizeToBounds()}),null!=o&&(r.TheoDocumentUtils.applyFontToForma(o,a),this.validateMSL(o),l=r.TheoDocumentUtils.getFontSize(o),o.controller.snapSizeToBounds()),r.TheoDocumentUtils.autoScaleFormaToDoc(e,175),{palette:i,businessFont:s,taglineFont:o?a:void 0,businessFontSizes:c,taglineFontSize:l}}ensureSVGColors(e){const t=e.firstPage.root.filterByKind(a.a.ShapeForma.KIND).filter(e=>null!=e&&"icon"===e.intent);if(null!=t&&t.length>1){const e=t[0].style.colors.colorID(a.a.ColorRole.FieldPrimary);for(let n=1;n<t.length;n++)t[n].style.colors.setColorId(a.a.ColorRole.FieldPrimary,e)}}validateMSL(e){e.controller.text.split(" ").length<=1&&!S(e.style.characterStyles)&&e.controller.clearCharStyle()}getBusinessNameText(e,t){const n=e.controller.text.replace(F,x).toLocaleLowerCase();return n===w[0]?t:-1!=w.slice(1,4).indexOf(n)?t.split(/\s/).reduce((e,t)=>e+=t.slice(0,1),"").toLocaleUpperCase():t}applySuggestedStyleForForma(e){const t=e.controller.styleController.getNewStyleAttributes(!0);return e.applyStyle(t),t}applySuggestedGridStyle(e){const t=a.a.LayoutSuggester.createContentAwareSuggestions(e.firstPage.root);let n=e.firstPage.root.controller.createGridControllerIfNone(),o=n.margin,r=n.spacing;n&&(n.margin=o,n.spacing=r,n.applyStyle(t[0].gridStyle,0))}applyAutoMSL(e){const t=e.controller;t.styleController.targetedLockupStyleName=a.a.TypeLockupController.HIGHLIGHT_STYLE,t.autoApplyCharStyle(!1,!1,!1),t.selectCharStyleForma()}getBusinessLockup(e){return e.firstPage.root.filterByControllerKind(a.a.TypeLockupController.KIND).filter(e=>{const t=e.controller.text.replace(F,x).toLowerCase();return-1!=w.indexOf(t)})}getTagLineLockup(e){let t=null;return e.firstPage.root.filterByControllerKind(a.a.TypeLockupController.KIND).forEach(e=>{const n=e.controller.text.replace(F,x).toLowerCase();-1!==C.indexOf(n)&&(t=e)}),t}getIconFormaToReplace(e){const t=e.firstPage.root.filterByKind(a.a.ShapeForma.KIND).filter(e=>null!=e&&e.intent===y);return null!=t&&t.length>0?t[0]:null}getRandomPalette(){this.randomColorNumbers.length<=0&&(this.randomColorNumbers=Object(g.j)(this.colorPalette.length));const e=this.randomColorNumbers.pop();return this.colorPalette[e]}getRandomFonts(e){return P.getRandomFontFromFonts(this.fonts,e)}static getRandomFontFromFonts(e,t){return t&&!S(t)&&(e=e.filter(e=>{let n=!0;return Object.keys(t).forEach(o=>{if(!(n=n&&e[o]!==t[o]))return n}),n})),[(e=h.a.shuffle(e))[0]?e[0]:r.Fonts.getDefaultFont(),e[1]?e[1]:r.Fonts.getDefaultFont()]}getLogoCompsForUserPref(e){const t=Date.now(),o=this.getCompositionsForUserPref(e),r=[];o.forEach(e=>{let{id:t,metadata:o}=e;const i=n(761)("./".concat(t,"/manifest.json"));r.push({manifest:i,metadata:o})});const s=r.map(e=>{let{manifest:t,metadata:n}=e;const o=new a.a.TheoDocument(new a.a.DocumentController),r=new i.a({makeComponentUrl:e=>"",trackAbsolutePath:!1,branch:t,remix:!0});return o.decode(r),{doc:o,metadata:n}});return f.c.info("TIME TOOK to make template docs: ",Date.now()-t),s}getCompositionsForUserPref(e){f.c.info("PAGE_SIZE:",I);const t=I*e;return this.logoComps.slice(t,t+I).map(e=>({id:e.id,metadata:{iconFilled:e.iconFilled,fontRestriction:e.fontRestriction,hasLogo:e.hasLogo,id:e.id}}))}static generatePreviewForDoc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new o.a(e).generatePreview(r,i).then(o=>({appliedStyle:t,previewImg:o,docId:e.uuid,metadata:n}))}getColorVariationForLogoId(e){const t=this.generatedLogos[e];if(t){const e=t.doc;e.firstPage.colorLibraryController.shuffleColorAssignments();const n={palette:t.appliedStyle.palette,businessFont:t.appliedStyle.businessFont,taglineFont:t.appliedStyle.taglineFont};return P.generatePreviewForDoc(e,n)}return null}getFontVariationForLogoId(e){const t=this.generatedLogos[e];if(t){const e=t.doc,n=e.firstPage.root.filterByControllerKind(a.a.TypeLockupController.KIND);this.randomFontNumbers=h.a.shuffle(this.randomFontNumbers);let o=[];n.forEach((e,t)=>{const n=this.fonts[this.randomFontNumbers[t]];a.a.TypeLockupUtils.applyFontToController(a.a.TheoFont.init_9e5c(n,n.sparkElementId,n.roles),e.controller),o.push(n)});const r={palette:t.appliedStyle.palette,businessFont:o[0],taglineFont:o.length>0?o[1]:null};return P.generatePreviewForDoc(e,r)}return null}static getImgUrlPromises(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=a.a.TheoDocumentUtils.duplicateDocument(e),s=a.a.TheoDocumentUtils.duplicateDocument(e);r.TheoDocumentUtils.convertToWhite(i,t),r.TheoDocumentUtils.convertToBlack(s,t);let l=[i,s];if(n){const t=a.a.TheoDocumentUtils.duplicateDocument(e);r.TheoDocumentUtils.setTransparency(t,0),l.push(t)}const c=l.map(e=>P.generatePreviewForDoc(e,{},null,{outputFormat:"image/png"},o));return c.unshift(P.generatePreviewForDoc(e,{},null,{},o)),m.a.all(c)}}var L=P;n.d(t,"a",function(){return L})}}]);
//# sourceMappingURL=logomaker-entry_7ae17d62-86d03819.js.map